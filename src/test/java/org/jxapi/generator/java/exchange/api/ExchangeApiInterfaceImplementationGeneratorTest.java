package org.jxapi.generator.java.exchange.api;

import java.nio.file.Paths;
import java.util.List;

import org.junit.Assert;
import org.junit.Test;

import org.jxapi.exchange.descriptor.gen.ExchangeApiDescriptor;
import org.jxapi.exchange.descriptor.gen.ExchangeDescriptor;
import org.jxapi.exchange.descriptor.gen.NetworkDescriptor;
import org.jxapi.exchange.descriptor.parser.ExchangeDescriptorParser;
import org.jxapi.util.PlaceHolderResolver;

/**
 * Unit test for {@link ExchangeApiInterfaceImplementationGenerator}
 */
public class ExchangeApiInterfaceImplementationGeneratorTest {

  @Test
  public void testGenerateExchangeApi() throws Exception {
    ExchangeDescriptor exchangeDescriptor = ExchangeDescriptorParser.fromJson(Paths.get(".", "src", "test", "resources", "exchangeApiInterfaceImplementationGeneratorTestDescriptor.json"));
    ExchangeApiDescriptor exchangeApiDescriptor = exchangeDescriptor.getApis().get(0);
    ExchangeApiInterfaceImplementationGenerator apiInterfaceGenerator = new ExchangeApiInterfaceImplementationGenerator(exchangeDescriptor, exchangeApiDescriptor, PlaceHolderResolver.NO_OP);
    Assert.assertEquals("package com.foo.bar.gen.marketdata;\n"
        + "\n"
        + "import java.util.List;\n"
        + "\n"
        + "import com.foo.bar.gen.MyTestExchangeExchange;\n"
        + "import com.foo.bar.gen.marketdata.pojo.MyTestExchangeMarketDataExchangeInfoRequest;\n"
        + "import com.foo.bar.gen.marketdata.pojo.MyTestExchangeMarketDataExchangeInfoResponse;\n"
        + "import com.foo.bar.gen.marketdata.pojo.MyTestExchangeMarketDataTickerStreamMessage;\n"
        + "import com.foo.bar.gen.marketdata.pojo.MyTestExchangeMarketDataTickerStreamRequest;\n"
        + "import com.foo.bar.gen.marketdata.pojo.deserializers.MyTestExchangeMarketDataExchangeInfoResponseDeserializer;\n"
        + "import com.foo.bar.gen.marketdata.pojo.deserializers.MyTestExchangeMarketDataTickerStreamMessageDeserializer;\n"
        + "import javax.annotation.processing.Generated;\n"
        + "import org.jxapi.exchange.AbstractExchangeApi;\n"
        + "import org.jxapi.exchange.ExchangeObserver;\n"
        + "import org.jxapi.netutils.deserialization.MessageDeserializer;\n"
        + "import org.jxapi.netutils.rest.FutureRestResponse;\n"
        + "import org.jxapi.netutils.rest.HttpMethod;\n"
        + "import org.jxapi.netutils.rest.HttpRequestUrlParamsSerializer;\n"
        + "import org.jxapi.netutils.rest.RestEndpoint;\n"
        + "import org.jxapi.netutils.websocket.WebsocketEndpoint;\n"
        + "import org.jxapi.netutils.websocket.WebsocketListener;\n"
        + "import org.jxapi.netutils.websocket.WebsocketSubscribeRequest;\n"
        + "import org.jxapi.netutils.websocket.multiplexing.WSMTMFUtil;\n"
        + "import org.jxapi.netutils.websocket.multiplexing.WebsocketMessageTopicMatcherFactory;\n"
        + "import org.jxapi.util.EncodingUtil;\n"
        + "import org.jxapi.util.JsonUtil;\n"
        + "\n"
        + "/**\n"
        + " * Actual implementation of {@link MyTestExchangeMarketDataApi}<br>\n"
        + " */\n"
        + "@Generated(\"org.jxapi.generator.java.exchange.api.ExchangeApiInterfaceImplementationGenerator\")\n"
        + "public class MyTestExchangeMarketDataApiImpl extends AbstractExchangeApi implements MyTestExchangeMarketDataApi {\n"
        + "  \n"
        + "  // REST endpoints URL parameter serializers\n"
        + "  private static final HttpRequestUrlParamsSerializer<MyTestExchangeMarketDataExchangeInfoRequest> EXCHANGE_INFO_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"symbols\", JsonUtil.pojoToJsonString(request.getSymbols()))).toString();\n"
        + "  \n"
        + "  // Message deserializers\n"
        + "  private static final MessageDeserializer<MyTestExchangeMarketDataExchangeInfoResponse> EXCHANGE_INFO_REST_API_RESPONSE_DESERIALIZER = new MyTestExchangeMarketDataExchangeInfoResponseDeserializer();\n"
        + "  private static final MessageDeserializer<MyTestExchangeMarketDataTickerStreamMessage> TICKER_STREAM_WS_API_MESSAGE_DESERIALIZER = new MyTestExchangeMarketDataTickerStreamMessageDeserializer();\n"
        + "  \n"
        + "  // REST endpoints\n"
        + "  private final RestEndpoint<MyTestExchangeMarketDataExchangeInfoRequest, MyTestExchangeMarketDataExchangeInfoResponse> exchangeInfoRestEndpoint;\n"
        + "  \n"
        + "  // Websocket endpoints\n"
        + "  private final WebsocketEndpoint<MyTestExchangeMarketDataTickerStreamMessage> tickerStreamWsEndpoint;\n"
        + "  \n"
        + "  // Constructor\n"
        + "  /**\n"
        + "   * Constructor\n"
        + "   * \n"
        + "   * @param exchange the exchange instance\n"
        + "   * @param exchangeObserver the exchange API observer to dispatch endpoint events to\n"
        + "   * \n"
        + "   */\n"
        + "  public MyTestExchangeMarketDataApiImpl(MyTestExchangeExchange exchange, ExchangeObserver exchangeObserver) {\n"
        + "    super(ID,\n"
        + "          exchange,\n"
        + "          exchangeObserver,\n"
        + "          null);\n"
        + "    this.exchangeInfoRestEndpoint = createRestEndpoint(EXCHANGE_INFO_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.exchangeInfoRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.exchangeInfoRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"https://mycex.com/trading/exchangeInfo\"));\n"
        + "    this.exchangeInfoRestEndpoint.setUrlParamsSerializer(EXCHANGE_INFO_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.exchangeInfoRestEndpoint.setDeserializer(EXCHANGE_INFO_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.tickerStreamWsEndpoint = createWebsocketEndpoint(TICKER_STREAM_WS_API, MyTestExchangeExchange.WS_DEFAULT_WEBSOCKET_CLIENT, TICKER_STREAM_WS_API_MESSAGE_DESERIALIZER);\n"
        + "  }\n"
        + "  \n"
        + "  // REST endpoint method call implementations\n"
        + "  @Override\n"
        + "  public FutureRestResponse<MyTestExchangeMarketDataExchangeInfoResponse> exchangeInfo(MyTestExchangeMarketDataExchangeInfoRequest request) {\n"
        + "    return exchangeInfoRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  \n"
        + "  // Websocket endpoint subscribe/unsubscribe methods implementations\n"
        + "  @Override\n"
        + "  public String subscribeTickerStream(MyTestExchangeMarketDataTickerStreamRequest request, WebsocketListener<MyTestExchangeMarketDataTickerStreamMessage> listener) {\n"
        + "    String topic = EncodingUtil.substituteArguments(\"${symbol}@ticker\", );\n"
        + "    WebsocketMessageTopicMatcherFactory topicMatcherFactory = WSMTMFUtil.and(List.of(\n"
        + "      WSMTMFUtil.value(\"t\", \"ticker\"),\n"
        + "      WSMTMFUtil.value(\"s\", EncodingUtil.substituteArguments(\"${request.symbol}\", \"request.symbol\", request.getSymbol()))));\n"
        + "    WebsocketSubscribeRequest subscribeRequest = WebsocketSubscribeRequest.create(request, topic, topicMatcherFactory);\n"
        + "    return tickerStreamWsEndpoint.subscribe(subscribeRequest, listener);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public boolean unsubscribeTickerStream(String subscriptionId) {\n"
        + "    return tickerStreamWsEndpoint.unsubscribe(subscriptionId);\n"
        + "  }\n"
        + "  \n"
        + "}\n"
        + "",  
        apiInterfaceGenerator.generate());
  }
  
  @Test
  public void testGenerateExchangeApiWithGlobalRateLimits() throws Exception {
    ExchangeDescriptor exchangeDescriptor = ExchangeDescriptorParser.fromJson(Paths.get(".", "src", "test", "resources", "exchangeApiInterfaceImplementationGeneratorTestDescriptor.json"));
    ExchangeApiDescriptor exchangeApiDescriptor = exchangeDescriptor.getApis().get(1);
    ExchangeApiInterfaceImplementationGenerator apiInterfaceGenerator = new ExchangeApiInterfaceImplementationGenerator(exchangeDescriptor, exchangeApiDescriptor, PlaceHolderResolver.NO_OP);
    Assert.assertEquals("package com.foo.bar.gen.trading;\n"
        + "\n"
        + "import com.foo.bar.gen.MyTestExchangeExchange;\n"
        + "import com.foo.bar.gen.trading.pojo.MyTestExchangeTradingExchangeInfoRequest;\n"
        + "import com.foo.bar.gen.trading.pojo.MyTestExchangeTradingExchangeInfoResponse;\n"
        + "import com.foo.bar.gen.trading.pojo.deserializers.MyTestExchangeTradingExchangeInfoResponseDeserializer;\n"
        + "import javax.annotation.processing.Generated;\n"
        + "import org.jxapi.exchange.AbstractExchangeApi;\n"
        + "import org.jxapi.exchange.ExchangeObserver;\n"
        + "import org.jxapi.netutils.deserialization.MessageDeserializer;\n"
        + "import org.jxapi.netutils.rest.FutureRestResponse;\n"
        + "import org.jxapi.netutils.rest.HttpMethod;\n"
        + "import org.jxapi.netutils.rest.HttpRequestUrlParamsSerializer;\n"
        + "import org.jxapi.netutils.rest.RestEndpoint;\n"
        + "import org.jxapi.util.EncodingUtil;\n"
        + "import org.jxapi.util.JsonUtil;\n"
        + "\n"
        + "/**\n"
        + " * Actual implementation of {@link MyTestExchangeTradingApi}<br>\n"
        + " */\n"
        + "@Generated(\"org.jxapi.generator.java.exchange.api.ExchangeApiInterfaceImplementationGenerator\")\n"
        + "public class MyTestExchangeTradingApiImpl extends AbstractExchangeApi implements MyTestExchangeTradingApi {\n"
        + "  \n"
        + "  // REST endpoints URL parameter serializers\n"
        + "  private static final HttpRequestUrlParamsSerializer<MyTestExchangeTradingExchangeInfoRequest> EXCHANGE_INFO_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"symbols\", JsonUtil.pojoToJsonString(request.getSymbols()))).toString();\n"
        + "  \n"
        + "  // Message deserializers\n"
        + "  private static final MessageDeserializer<MyTestExchangeTradingExchangeInfoResponse> EXCHANGE_INFO_REST_API_RESPONSE_DESERIALIZER = new MyTestExchangeTradingExchangeInfoResponseDeserializer();\n"
        + "  \n"
        + "  // REST endpoints\n"
        + "  private final RestEndpoint<MyTestExchangeTradingExchangeInfoRequest, MyTestExchangeTradingExchangeInfoResponse> exchangeInfoRestEndpoint;\n"
        + "  \n"
        + "  // Constructor\n"
        + "  /**\n"
        + "   * Constructor\n"
        + "   * \n"
        + "   * @param exchange the exchange instance\n"
        + "   * @param exchangeObserver the exchange API observer to dispatch endpoint events to\n"
        + "   * \n"
        + "   */\n"
        + "  public MyTestExchangeTradingApiImpl(MyTestExchangeExchange exchange, ExchangeObserver exchangeObserver) {\n"
        + "    super(ID,\n"
        + "          exchange,\n"
        + "          exchangeObserver,\n"
        + "          \"/spot\");\n"
        + "    this.exchangeInfoRestEndpoint = createRestEndpoint(EXCHANGE_INFO_REST_API, MyTestExchangeExchange.TRADING_HTTP_CLIENT);\n"
        + "    this.exchangeInfoRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.exchangeInfoRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/exchangeInfo\"));\n"
        + "    this.exchangeInfoRestEndpoint.setUrlParamsSerializer(EXCHANGE_INFO_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.exchangeInfoRestEndpoint.setDeserializer(EXCHANGE_INFO_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    this.exchangeInfoRestEndpoint.setWeight(60);\n"
        + "    \n"
        + "  }\n"
        + "  \n"
        + "  // REST endpoint method call implementations\n"
        + "  @Override\n"
        + "  public FutureRestResponse<MyTestExchangeTradingExchangeInfoResponse> exchangeInfo(MyTestExchangeTradingExchangeInfoRequest request) {\n"
        + "    return exchangeInfoRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "}\n"
        + "",  
        apiInterfaceGenerator.generate());
  }
  
  @Test
  public void testGenerateExchangeApiWithEndpointSpecificRateLimits() throws Exception {
    ExchangeDescriptor exchangeDescriptor = ExchangeDescriptorParser.fromJson(Paths.get(".", "src", "test", "resources", "exchangeApiInterfaceImplementationGeneratorTestDescriptor.json"));
    ExchangeApiDescriptor exchangeApiDescriptor = exchangeDescriptor.getApis().get(2);
    ExchangeApiInterfaceImplementationGenerator apiInterfaceGenerator = new ExchangeApiInterfaceImplementationGenerator(exchangeDescriptor, exchangeApiDescriptor, PlaceHolderResolver.NO_OP);
    Assert.assertEquals("package com.foo.bar.gen.futuresmarketdata;\n"
        + "\n"
        + "import java.util.List;\n"
        + "\n"
        + "import com.foo.bar.gen.MyTestExchangeExchange;\n"
        + "import com.foo.bar.gen.futuresmarketdata.pojo.MyTestExchangeFuturesMarketDataExchangeInfo2Request;\n"
        + "import com.foo.bar.gen.futuresmarketdata.pojo.MyTestExchangeFuturesMarketDataExchangeInfo2Response;\n"
        + "import com.foo.bar.gen.futuresmarketdata.pojo.MyTestExchangeFuturesMarketDataExchangeInfoRequest;\n"
        + "import com.foo.bar.gen.futuresmarketdata.pojo.MyTestExchangeFuturesMarketDataExchangeInfoResponse;\n"
        + "import com.foo.bar.gen.futuresmarketdata.pojo.deserializers.MyTestExchangeFuturesMarketDataExchangeInfo2ResponseDeserializer;\n"
        + "import com.foo.bar.gen.futuresmarketdata.pojo.deserializers.MyTestExchangeFuturesMarketDataExchangeInfoResponseDeserializer;\n"
        + "import javax.annotation.processing.Generated;\n"
        + "import org.jxapi.exchange.AbstractExchangeApi;\n"
        + "import org.jxapi.exchange.ExchangeObserver;\n"
        + "import org.jxapi.netutils.deserialization.MessageDeserializer;\n"
        + "import org.jxapi.netutils.rest.FutureRestResponse;\n"
        + "import org.jxapi.netutils.rest.HttpMethod;\n"
        + "import org.jxapi.netutils.rest.HttpRequestUrlParamsSerializer;\n"
        + "import org.jxapi.netutils.rest.RestEndpoint;\n"
        + "import org.jxapi.util.EncodingUtil;\n"
        + "import org.jxapi.util.JsonUtil;\n"
        + "\n"
        + "/**\n"
        + " * Actual implementation of {@link MyTestExchangeFuturesMarketDataApi}<br>\n"
        + " */\n"
        + "@Generated(\"org.jxapi.generator.java.exchange.api.ExchangeApiInterfaceImplementationGenerator\")\n"
        + "public class MyTestExchangeFuturesMarketDataApiImpl extends AbstractExchangeApi implements MyTestExchangeFuturesMarketDataApi {\n"
        + "  \n"
        + "  // REST endpoints URL parameter serializers\n"
        + "  private static final HttpRequestUrlParamsSerializer<MyTestExchangeFuturesMarketDataExchangeInfoRequest> EXCHANGE_INFO_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"symbols\", JsonUtil.pojoToJsonString(request.getSymbols()))).toString();\n"
        + "  private static final HttpRequestUrlParamsSerializer<MyTestExchangeFuturesMarketDataExchangeInfo2Request> EXCHANGE_INFO2_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"symbols\", JsonUtil.pojoToJsonString(request.getSymbols()))).toString();\n"
        + "  \n"
        + "  // Message deserializers\n"
        + "  private static final MessageDeserializer<MyTestExchangeFuturesMarketDataExchangeInfoResponse> EXCHANGE_INFO_REST_API_RESPONSE_DESERIALIZER = new MyTestExchangeFuturesMarketDataExchangeInfoResponseDeserializer();\n"
        + "  private static final MessageDeserializer<MyTestExchangeFuturesMarketDataExchangeInfo2Response> EXCHANGE_INFO2_REST_API_RESPONSE_DESERIALIZER = new MyTestExchangeFuturesMarketDataExchangeInfo2ResponseDeserializer();\n"
        + "  \n"
        + "  // REST endpoints\n"
        + "  private final RestEndpoint<MyTestExchangeFuturesMarketDataExchangeInfoRequest, MyTestExchangeFuturesMarketDataExchangeInfoResponse> exchangeInfoRestEndpoint;\n"
        + "  private final RestEndpoint<MyTestExchangeFuturesMarketDataExchangeInfo2Request, MyTestExchangeFuturesMarketDataExchangeInfo2Response> exchangeInfo2RestEndpoint;\n"
        + "  \n"
        + "  // Constructor\n"
        + "  /**\n"
        + "   * Constructor\n"
        + "   * \n"
        + "   * @param exchange the exchange instance\n"
        + "   * @param exchangeObserver the exchange API observer to dispatch endpoint events to\n"
        + "   * \n"
        + "   */\n"
        + "  public MyTestExchangeFuturesMarketDataApiImpl(MyTestExchangeExchange exchange, ExchangeObserver exchangeObserver) {\n"
        + "    super(ID,\n"
        + "          exchange,\n"
        + "          exchangeObserver,\n"
        + "          \"/futures\");\n"
        + "    this.exchangeInfoRestEndpoint = createRestEndpoint(EXCHANGE_INFO_REST_API, MyTestExchangeExchange.FUTURES_MARKET_DATA_HTTP_CLIENT);\n"
        + "    this.exchangeInfoRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.exchangeInfoRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/exchangeInfo\"));\n"
        + "    this.exchangeInfoRestEndpoint.setUrlParamsSerializer(EXCHANGE_INFO_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.exchangeInfoRestEndpoint.setDeserializer(EXCHANGE_INFO_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    this.exchangeInfoRestEndpoint.setRateLimitRules(List.of(exchange.getExchangeInfoCountRuleRateLimit()));\n"
        + "    \n"
        + "    this.exchangeInfo2RestEndpoint = createRestEndpoint(EXCHANGE_INFO2_REST_API, MyTestExchangeExchange.FUTURES_MARKET_DATA_HTTP_CLIENT);\n"
        + "    this.exchangeInfo2RestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.exchangeInfo2RestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"https://com.sample.v2.myexchange/exchangeInfo2\"));\n"
        + "    this.exchangeInfo2RestEndpoint.setUrlParamsSerializer(EXCHANGE_INFO2_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.exchangeInfo2RestEndpoint.setDeserializer(EXCHANGE_INFO2_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "  }\n"
        + "  \n"
        + "  // REST endpoint method call implementations\n"
        + "  @Override\n"
        + "  public FutureRestResponse<MyTestExchangeFuturesMarketDataExchangeInfoResponse> exchangeInfo(MyTestExchangeFuturesMarketDataExchangeInfoRequest request) {\n"
        + "    return exchangeInfoRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<MyTestExchangeFuturesMarketDataExchangeInfo2Response> exchangeInfo2(MyTestExchangeFuturesMarketDataExchangeInfo2Request request) {\n"
        + "    return exchangeInfo2RestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "}\n"
        + "",  
        apiInterfaceGenerator.generate());
  }
  
  @Test
  public void testGenerateExchangeApiWithBothApiGlobalAndEndpointSpecificRateLimits() throws Exception {
    ExchangeDescriptor exchangeDescriptor = ExchangeDescriptorParser.fromJson(Paths.get(".", "src", "test", "resources", "exchangeApiInterfaceImplementationGeneratorTestDescriptor.json"));
    ExchangeApiDescriptor exchangeApiDescriptor = exchangeDescriptor.getApis().get(3);
    ExchangeApiInterfaceImplementationGenerator apiInterfaceGenerator = new ExchangeApiInterfaceImplementationGenerator(exchangeDescriptor, exchangeApiDescriptor, PlaceHolderResolver.NO_OP);
    Assert.assertEquals("package com.foo.bar.gen.futurestrading;\n"
        + "\n"
        + "import java.util.List;\n"
        + "\n"
        + "import com.foo.bar.gen.MyTestExchangeExchange;\n"
        + "import com.foo.bar.gen.futurestrading.pojo.MyTestExchangeFuturesTradingExchangeInfoRequest;\n"
        + "import com.foo.bar.gen.futurestrading.pojo.MyTestExchangeFuturesTradingExchangeInfoResponse;\n"
        + "import com.foo.bar.gen.futurestrading.pojo.deserializers.MyTestExchangeFuturesTradingExchangeInfoResponseDeserializer;\n"
        + "import javax.annotation.processing.Generated;\n"
        + "import org.jxapi.exchange.AbstractExchangeApi;\n"
        + "import org.jxapi.exchange.ExchangeObserver;\n"
        + "import org.jxapi.netutils.deserialization.MessageDeserializer;\n"
        + "import org.jxapi.netutils.rest.FutureRestResponse;\n"
        + "import org.jxapi.netutils.rest.HttpMethod;\n"
        + "import org.jxapi.netutils.rest.HttpRequestUrlParamsSerializer;\n"
        + "import org.jxapi.netutils.rest.RestEndpoint;\n"
        + "import org.jxapi.util.EncodingUtil;\n"
        + "import org.jxapi.util.JsonUtil;\n"
        + "\n"
        + "/**\n"
        + " * Actual implementation of {@link MyTestExchangeFuturesTradingApi}<br>\n"
        + " */\n"
        + "@Generated(\"org.jxapi.generator.java.exchange.api.ExchangeApiInterfaceImplementationGenerator\")\n"
        + "public class MyTestExchangeFuturesTradingApiImpl extends AbstractExchangeApi implements MyTestExchangeFuturesTradingApi {\n"
        + "  \n"
        + "  // REST endpoints URL parameter serializers\n"
        + "  private static final HttpRequestUrlParamsSerializer<MyTestExchangeFuturesTradingExchangeInfoRequest> EXCHANGE_INFO_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"symbols\", JsonUtil.pojoToJsonString(request.getSymbols()))).toString();\n"
        + "  \n"
        + "  // Message deserializers\n"
        + "  private static final MessageDeserializer<MyTestExchangeFuturesTradingExchangeInfoResponse> EXCHANGE_INFO_REST_API_RESPONSE_DESERIALIZER = new MyTestExchangeFuturesTradingExchangeInfoResponseDeserializer();\n"
        + "  \n"
        + "  // REST endpoints\n"
        + "  private final RestEndpoint<MyTestExchangeFuturesTradingExchangeInfoRequest, MyTestExchangeFuturesTradingExchangeInfoResponse> exchangeInfoRestEndpoint;\n"
        + "  \n"
        + "  // Constructor\n"
        + "  /**\n"
        + "   * Constructor\n"
        + "   * \n"
        + "   * @param exchange the exchange instance\n"
        + "   * @param exchangeObserver the exchange API observer to dispatch endpoint events to\n"
        + "   * \n"
        + "   */\n"
        + "  public MyTestExchangeFuturesTradingApiImpl(MyTestExchangeExchange exchange, ExchangeObserver exchangeObserver) {\n"
        + "    super(ID,\n"
        + "          exchange,\n"
        + "          exchangeObserver,\n"
        + "          null);\n"
        + "    this.exchangeInfoRestEndpoint = createRestEndpoint(EXCHANGE_INFO_REST_API, MyTestExchangeExchange.FUTURES_TRADING_HTTP_CLIENT);\n"
        + "    this.exchangeInfoRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.exchangeInfoRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"https://myexchage.com/futuresTrading/exchangeInfo\"));\n"
        + "    this.exchangeInfoRestEndpoint.setUrlParamsSerializer(EXCHANGE_INFO_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.exchangeInfoRestEndpoint.setDeserializer(EXCHANGE_INFO_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    this.exchangeInfoRestEndpoint.setRateLimitRules(List.of(exchange.getFuturesTradeGlobalWeightRuleRateLimit(), exchange.getFuturesTradeGlobalCountRuleRateLimit()));\n"
        + "    this.exchangeInfoRestEndpoint.setWeight(60);\n"
        + "    \n"
        + "  }\n"
        + "  \n"
        + "  // REST endpoint method call implementations\n"
        + "  @Override\n"
        + "  public FutureRestResponse<MyTestExchangeFuturesTradingExchangeInfoResponse> exchangeInfo(MyTestExchangeFuturesTradingExchangeInfoRequest request) {\n"
        + "    return exchangeInfoRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "}\n"
        + "",  
        apiInterfaceGenerator.generate());
  }
  
  @Test
  public void testGenerateExchangeApiWithBothExchangeGlobalAndApiGlobalAndEndpointSpecificRateLimits() throws Exception {
    ExchangeDescriptor exchangeDescriptor = ExchangeDescriptorParser.fromJson(Paths.get(".", "src", "test", "resources", "exchangeApiInterfaceImplementationGeneratorTestWithRateLimitRulesAtExchangeLevelDescriptor.json"));
    ExchangeApiDescriptor exchangeApiDescriptor = exchangeDescriptor.getApis().get(0);
    ExchangeApiInterfaceImplementationGenerator apiInterfaceGenerator = new ExchangeApiInterfaceImplementationGenerator(exchangeDescriptor, exchangeApiDescriptor, PlaceHolderResolver.NO_OP);
    Assert.assertEquals("package com.foo.bar.gen.futurestrading;\n"
        + "\n"
        + "import java.util.List;\n"
        + "\n"
        + "import com.foo.bar.gen.MyTestExchangeExchange;\n"
        + "import com.foo.bar.gen.futurestrading.pojo.MyTestExchangeFuturesTradingExchangeInfoRequest;\n"
        + "import com.foo.bar.gen.futurestrading.pojo.MyTestExchangeFuturesTradingExchangeInfoResponse;\n"
        + "import com.foo.bar.gen.futurestrading.pojo.deserializers.MyTestExchangeFuturesTradingExchangeInfoResponseDeserializer;\n"
        + "import javax.annotation.processing.Generated;\n"
        + "import org.jxapi.exchange.AbstractExchangeApi;\n"
        + "import org.jxapi.exchange.ExchangeObserver;\n"
        + "import org.jxapi.netutils.deserialization.MessageDeserializer;\n"
        + "import org.jxapi.netutils.rest.FutureRestResponse;\n"
        + "import org.jxapi.netutils.rest.HttpMethod;\n"
        + "import org.jxapi.netutils.rest.HttpRequestUrlParamsSerializer;\n"
        + "import org.jxapi.netutils.rest.RestEndpoint;\n"
        + "import org.jxapi.util.EncodingUtil;\n"
        + "import org.jxapi.util.JsonUtil;\n"
        + "\n"
        + "/**\n"
        + " * Actual implementation of {@link MyTestExchangeFuturesTradingApi}<br>\n"
        + " */\n"
        + "@Generated(\"org.jxapi.generator.java.exchange.api.ExchangeApiInterfaceImplementationGenerator\")\n"
        + "public class MyTestExchangeFuturesTradingApiImpl extends AbstractExchangeApi implements MyTestExchangeFuturesTradingApi {\n"
        + "  \n"
        + "  // REST endpoints URL parameter serializers\n"
        + "  private static final HttpRequestUrlParamsSerializer<MyTestExchangeFuturesTradingExchangeInfoRequest> EXCHANGE_INFO_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"symbols\", JsonUtil.pojoToJsonString(request.getSymbols()))).toString();\n"
        + "  \n"
        + "  // Message deserializers\n"
        + "  private static final MessageDeserializer<MyTestExchangeFuturesTradingExchangeInfoResponse> EXCHANGE_INFO_REST_API_RESPONSE_DESERIALIZER = new MyTestExchangeFuturesTradingExchangeInfoResponseDeserializer();\n"
        + "  \n"
        + "  // REST endpoints\n"
        + "  private final RestEndpoint<MyTestExchangeFuturesTradingExchangeInfoRequest, MyTestExchangeFuturesTradingExchangeInfoResponse> exchangeInfoRestEndpoint;\n"
        + "  \n"
        + "  // Constructor\n"
        + "  /**\n"
        + "   * Constructor\n"
        + "   * \n"
        + "   * @param exchange the exchange instance\n"
        + "   * @param exchangeObserver the exchange API observer to dispatch endpoint events to\n"
        + "   * \n"
        + "   */\n"
        + "  public MyTestExchangeFuturesTradingApiImpl(MyTestExchangeExchange exchange, ExchangeObserver exchangeObserver) {\n"
        + "    super(ID,\n"
        + "          exchange,\n"
        + "          exchangeObserver,\n"
        + "          null);\n"
        + "    this.exchangeInfoRestEndpoint = createRestEndpoint(EXCHANGE_INFO_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.exchangeInfoRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.exchangeInfoRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"https://com.sample.myexchange/exchangeInfo\"));\n"
        + "    this.exchangeInfoRestEndpoint.setUrlParamsSerializer(EXCHANGE_INFO_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.exchangeInfoRestEndpoint.setDeserializer(EXCHANGE_INFO_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    this.exchangeInfoRestEndpoint.setRateLimitRules(List.of(exchange.getExchangeGlobalRuleRateLimit(), exchange.getApiGlobalWeightRuleRateLimit()));\n"
        + "    this.exchangeInfoRestEndpoint.setWeight(60);\n"
        + "    \n"
        + "  }\n"
        + "  \n"
        + "  // REST endpoint method call implementations\n"
        + "  @Override\n"
        + "  public FutureRestResponse<MyTestExchangeFuturesTradingExchangeInfoResponse> exchangeInfo(MyTestExchangeFuturesTradingExchangeInfoRequest request) {\n"
        + "    return exchangeInfoRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "}\n"
        + "",  
      apiInterfaceGenerator.generate());
  }
  
  @Test
  public void testExchangeApiInterfaceImplementationGeneratorTestOnlyExchangeLevelWeightedLimitRateRuleExchangeDescriptor() throws Exception {
    ExchangeDescriptor exchangeDescriptor = ExchangeDescriptorParser.fromJson(Paths.get(".", "src", "test", "resources", "exchangeApiInterfaceImplementationGeneratorTestOnlyExchangeLevelWeightedLimitRateRuleExchangeDescriptor.json"));
    ExchangeApiDescriptor exchangeApiDescriptor = exchangeDescriptor.getApis().get(0);
    ExchangeApiInterfaceImplementationGenerator apiInterfaceGenerator = new ExchangeApiInterfaceImplementationGenerator(exchangeDescriptor, exchangeApiDescriptor, PlaceHolderResolver.NO_OP);
    Assert.assertEquals("package com.foo.bar.gen.futurestrading;\n"
        + "\n"
        + "import java.util.List;\n"
        + "\n"
        + "import com.foo.bar.gen.MyTestExchangeExchange;\n"
        + "import com.foo.bar.gen.futurestrading.pojo.MyTestExchangeFuturesTradingExchangeInfoRequest;\n"
        + "import com.foo.bar.gen.futurestrading.pojo.MyTestExchangeFuturesTradingExchangeInfoResponse;\n"
        + "import com.foo.bar.gen.futurestrading.pojo.deserializers.MyTestExchangeFuturesTradingExchangeInfoResponseDeserializer;\n"
        + "import javax.annotation.processing.Generated;\n"
        + "import org.jxapi.exchange.AbstractExchangeApi;\n"
        + "import org.jxapi.exchange.ExchangeObserver;\n"
        + "import org.jxapi.netutils.deserialization.MessageDeserializer;\n"
        + "import org.jxapi.netutils.rest.FutureRestResponse;\n"
        + "import org.jxapi.netutils.rest.HttpMethod;\n"
        + "import org.jxapi.netutils.rest.HttpRequestUrlParamsSerializer;\n"
        + "import org.jxapi.netutils.rest.RestEndpoint;\n"
        + "import org.jxapi.util.EncodingUtil;\n"
        + "import org.jxapi.util.JsonUtil;\n"
        + "\n"
        + "/**\n"
        + " * Actual implementation of {@link MyTestExchangeFuturesTradingApi}<br>\n"
        + " */\n"
        + "@Generated(\"org.jxapi.generator.java.exchange.api.ExchangeApiInterfaceImplementationGenerator\")\n"
        + "public class MyTestExchangeFuturesTradingApiImpl extends AbstractExchangeApi implements MyTestExchangeFuturesTradingApi {\n"
        + "  \n"
        + "  // REST endpoints URL parameter serializers\n"
        + "  private static final HttpRequestUrlParamsSerializer<MyTestExchangeFuturesTradingExchangeInfoRequest> EXCHANGE_INFO_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"symbols\", JsonUtil.pojoToJsonString(request.getSymbols()))).toString();\n"
        + "  \n"
        + "  // Message deserializers\n"
        + "  private static final MessageDeserializer<MyTestExchangeFuturesTradingExchangeInfoResponse> EXCHANGE_INFO_REST_API_RESPONSE_DESERIALIZER = new MyTestExchangeFuturesTradingExchangeInfoResponseDeserializer();\n"
        + "  \n"
        + "  // REST endpoints\n"
        + "  private final RestEndpoint<MyTestExchangeFuturesTradingExchangeInfoRequest, MyTestExchangeFuturesTradingExchangeInfoResponse> exchangeInfoRestEndpoint;\n"
        + "  \n"
        + "  // Constructor\n"
        + "  /**\n"
        + "   * Constructor\n"
        + "   * \n"
        + "   * @param exchange the exchange instance\n"
        + "   * @param exchangeObserver the exchange API observer to dispatch endpoint events to\n"
        + "   * \n"
        + "   */\n"
        + "  public MyTestExchangeFuturesTradingApiImpl(MyTestExchangeExchange exchange, ExchangeObserver exchangeObserver) {\n"
        + "    super(ID,\n"
        + "          exchange,\n"
        + "          exchangeObserver,\n"
        + "          null);\n"
        + "    this.exchangeInfoRestEndpoint = createRestEndpoint(EXCHANGE_INFO_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.exchangeInfoRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.exchangeInfoRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"https://com.sample.mycex/exchangeInfo\"));\n"
        + "    this.exchangeInfoRestEndpoint.setUrlParamsSerializer(EXCHANGE_INFO_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.exchangeInfoRestEndpoint.setDeserializer(EXCHANGE_INFO_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    this.exchangeInfoRestEndpoint.setRateLimitRules(List.of(exchange.getExchangeGlobalRuleRateLimit()));\n"
        + "    this.exchangeInfoRestEndpoint.setWeight(60);\n"
        + "    \n"
        + "  }\n"
        + "  \n"
        + "  // REST endpoint method call implementations\n"
        + "  @Override\n"
        + "  public FutureRestResponse<MyTestExchangeFuturesTradingExchangeInfoResponse> exchangeInfo(MyTestExchangeFuturesTradingExchangeInfoRequest request) {\n"
        + "    return exchangeInfoRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "}\n"
        + "",
        apiInterfaceGenerator.generate());
  }
  
  @Test
  public void testExchangeApiInterfaceImplementationGeneratorTestExchangeLevelLimitRateRuleButEmptyRestEndpoints() throws Exception {
    ExchangeDescriptor exchangeDescriptor = ExchangeDescriptorParser.fromJson(Paths.get(".", "src", "test", "resources", "exchangeApiInterfaceImplementationGeneratorTestOnlyExchangeLevelWeightedLimitRateRuleExchangeDescriptor.json"));
    ExchangeApiDescriptor exchangeApiDescriptor = exchangeDescriptor.getApis().get(0);
    exchangeApiDescriptor.setRestEndpoints(List.of());
    ExchangeApiInterfaceImplementationGenerator apiInterfaceGenerator = new ExchangeApiInterfaceImplementationGenerator(exchangeDescriptor, exchangeApiDescriptor, PlaceHolderResolver.NO_OP);
    Assert.assertEquals("package com.foo.bar.gen.futurestrading;\n"
        + "\n"
        + "import com.foo.bar.gen.MyTestExchangeExchange;\n"
        + "import javax.annotation.processing.Generated;\n"
        + "import org.jxapi.exchange.AbstractExchangeApi;\n"
        + "import org.jxapi.exchange.ExchangeObserver;\n"
        + "\n"
        + "/**\n"
        + " * Actual implementation of {@link MyTestExchangeFuturesTradingApi}<br>\n"
        + " */\n"
        + "@Generated(\"org.jxapi.generator.java.exchange.api.ExchangeApiInterfaceImplementationGenerator\")\n"
        + "public class MyTestExchangeFuturesTradingApiImpl extends AbstractExchangeApi implements MyTestExchangeFuturesTradingApi {\n"
        + "  \n"
        + "  // Constructor\n"
        + "  /**\n"
        + "   * Constructor\n"
        + "   * \n"
        + "   * @param exchange the exchange instance\n"
        + "   * @param exchangeObserver the exchange API observer to dispatch endpoint events to\n"
        + "   * \n"
        + "   */\n"
        + "  public MyTestExchangeFuturesTradingApiImpl(MyTestExchangeExchange exchange, ExchangeObserver exchangeObserver) {\n"
        + "    super(ID,\n"
        + "          exchange,\n"
        + "          exchangeObserver,\n"
        + "          null);\n"
        + "  }\n"
        + "}\n"
        + "",
        apiInterfaceGenerator.generate());
  }
  
  @Test
  public void testGenerateExchangeApiNoWsEndpoint() throws Exception {
    ExchangeDescriptor exchangeDescriptor = ExchangeDescriptorParser.fromJson(Paths.get(".", "src", "test", "resources", "testExchangeDescriptorNoWebsocketEndpoint.json"));
    ExchangeApiDescriptor exchangeApiDescriptor = exchangeDescriptor.getApis().get(0);
    ExchangeApiInterfaceImplementationGenerator apiInterfaceGenerator = new ExchangeApiInterfaceImplementationGenerator(exchangeDescriptor, exchangeApiDescriptor, PlaceHolderResolver.NO_OP);
    Assert.assertEquals("package com.foo.bar.gen.marketdata;\n"
        + "\n"
        + "import com.foo.bar.gen.MyTestExchangeExchange;\n"
        + "import com.foo.bar.gen.marketdata.pojo.MyTestExchangeMarketDataExchangeInfoRequest;\n"
        + "import com.foo.bar.gen.marketdata.pojo.MyTestExchangeMarketDataExchangeInfoResponse;\n"
        + "import com.foo.bar.gen.marketdata.pojo.deserializers.MyTestExchangeMarketDataExchangeInfoResponseDeserializer;\n"
        + "import javax.annotation.processing.Generated;\n"
        + "import org.jxapi.exchange.AbstractExchangeApi;\n"
        + "import org.jxapi.exchange.ExchangeObserver;\n"
        + "import org.jxapi.netutils.deserialization.MessageDeserializer;\n"
        + "import org.jxapi.netutils.rest.FutureRestResponse;\n"
        + "import org.jxapi.netutils.rest.HttpMethod;\n"
        + "import org.jxapi.netutils.rest.HttpRequestUrlParamsSerializer;\n"
        + "import org.jxapi.netutils.rest.RestEndpoint;\n"
        + "import org.jxapi.util.EncodingUtil;\n"
        + "import org.jxapi.util.JsonUtil;\n"
        + "\n"
        + "/**\n"
        + " * Actual implementation of {@link MyTestExchangeMarketDataApi}<br>\n"
        + " */\n"
        + "@Generated(\"org.jxapi.generator.java.exchange.api.ExchangeApiInterfaceImplementationGenerator\")\n"
        + "public class MyTestExchangeMarketDataApiImpl extends AbstractExchangeApi implements MyTestExchangeMarketDataApi {\n"
        + "  \n"
        + "  // REST endpoints URL parameter serializers\n"
        + "  private static final HttpRequestUrlParamsSerializer<MyTestExchangeMarketDataExchangeInfoRequest> EXCHANGE_INFO_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"symbols\", JsonUtil.pojoToJsonString(request.getSymbols()))).toString();\n"
        + "  \n"
        + "  // Message deserializers\n"
        + "  private static final MessageDeserializer<MyTestExchangeMarketDataExchangeInfoResponse> EXCHANGE_INFO_REST_API_RESPONSE_DESERIALIZER = new MyTestExchangeMarketDataExchangeInfoResponseDeserializer();\n"
        + "  \n"
        + "  // REST endpoints\n"
        + "  private final RestEndpoint<MyTestExchangeMarketDataExchangeInfoRequest, MyTestExchangeMarketDataExchangeInfoResponse> exchangeInfoRestEndpoint;\n"
        + "  \n"
        + "  // Constructor\n"
        + "  /**\n"
        + "   * Constructor\n"
        + "   * \n"
        + "   * @param exchange the exchange instance\n"
        + "   * @param exchangeObserver the exchange API observer to dispatch endpoint events to\n"
        + "   * \n"
        + "   */\n"
        + "  public MyTestExchangeMarketDataApiImpl(MyTestExchangeExchange exchange, ExchangeObserver exchangeObserver) {\n"
        + "    super(ID,\n"
        + "          exchange,\n"
        + "          exchangeObserver,\n"
        + "          null);\n"
        + "    this.exchangeInfoRestEndpoint = createRestEndpoint(EXCHANGE_INFO_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.exchangeInfoRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.exchangeInfoRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"https://com.sample.myexchange/exchangeInfo\"));\n"
        + "    this.exchangeInfoRestEndpoint.setUrlParamsSerializer(EXCHANGE_INFO_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.exchangeInfoRestEndpoint.setDeserializer(EXCHANGE_INFO_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "  }\n"
        + "  \n"
        + "  // REST endpoint method call implementations\n"
        + "  @Override\n"
        + "  public FutureRestResponse<MyTestExchangeMarketDataExchangeInfoResponse> exchangeInfo(MyTestExchangeMarketDataExchangeInfoRequest request) {\n"
        + "    return exchangeInfoRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "}\n"
        + "",
        apiInterfaceGenerator.generate());
  }
  
  @Test
  public void testGenerateExchangeApiNoRestEndpoint() throws Exception {
    ExchangeDescriptor exchangeDescriptor = ExchangeDescriptorParser.fromJson(Paths.get(".", "src", "test", "resources", "testExchangeDescriptorNoRestEndpoint.json"));
    ExchangeApiDescriptor exchangeApiDescriptor = exchangeDescriptor.getApis().get(0);
    ExchangeApiInterfaceImplementationGenerator apiInterfaceGenerator = new ExchangeApiInterfaceImplementationGenerator(exchangeDescriptor, exchangeApiDescriptor, PlaceHolderResolver.NO_OP);
    Assert.assertEquals("package com.foo.bar.gen.marketdata;\n"
        + "\n"
        + "import java.util.List;\n"
        + "\n"
        + "import com.foo.bar.gen.MyTestExchangeExchange;\n"
        + "import com.foo.bar.gen.marketdata.pojo.MyTestExchangeMarketDataTickerStreamStringObjectTypeRequest;\n"
        + "import com.foo.bar.gen.marketdata.pojo.TickerMessage;\n"
        + "import com.foo.bar.gen.marketdata.pojo.deserializers.TickerMessageDeserializer;\n"
        + "import javax.annotation.processing.Generated;\n"
        + "import org.jxapi.exchange.AbstractExchangeApi;\n"
        + "import org.jxapi.exchange.ExchangeObserver;\n"
        + "import org.jxapi.netutils.websocket.WebsocketEndpoint;\n"
        + "import org.jxapi.netutils.websocket.WebsocketListener;\n"
        + "import org.jxapi.netutils.websocket.WebsocketSubscribeRequest;\n"
        + "import org.jxapi.netutils.websocket.multiplexing.WSMTMFUtil;\n"
        + "import org.jxapi.netutils.websocket.multiplexing.WebsocketMessageTopicMatcherFactory;\n"
        + "import org.jxapi.util.EncodingUtil;\n"
        + "\n"
        + "/**\n"
        + " * Actual implementation of {@link MyTestExchangeMarketDataApi}<br>\n"
        + " */\n"
        + "@Generated(\"org.jxapi.generator.java.exchange.api.ExchangeApiInterfaceImplementationGenerator\")\n"
        + "public class MyTestExchangeMarketDataApiImpl extends AbstractExchangeApi implements MyTestExchangeMarketDataApi {\n"
        + "  \n"
        + "  // Message deserializers\n"
        + "  private static final MessageDeserializer<TickerMessage> TICKER_STREAM_STRING_OBJECT_TYPE_WS_API_MESSAGE_DESERIALIZER = new TickerMessageDeserializer();\n"
        + "  private static final MessageDeserializer<TickerMessage> TICKER_STREAM_STRING_REQUEST_TYPE_WS_API_MESSAGE_DESERIALIZER = new TickerMessageDeserializer();\n"
        + "  \n"
        + "  // Websocket endpoints\n"
        + "  private final WebsocketEndpoint<TickerMessage> tickerStreamStringObjectTypeWsEndpoint;\n"
        + "  private final WebsocketEndpoint<TickerMessage> tickerStreamStringRequestTypeWsEndpoint;\n"
        + "  \n"
        + "  // Constructor\n"
        + "  /**\n"
        + "   * Constructor\n"
        + "   * \n"
        + "   * @param exchange the exchange instance\n"
        + "   * @param exchangeObserver the exchange API observer to dispatch endpoint events to\n"
        + "   * \n"
        + "   */\n"
        + "  public MyTestExchangeMarketDataApiImpl(MyTestExchangeExchange exchange, ExchangeObserver exchangeObserver) {\n"
        + "    super(ID,\n"
        + "          exchange,\n"
        + "          exchangeObserver,\n"
        + "          null);\n"
        + "    this.tickerStreamStringObjectTypeWsEndpoint = createWebsocketEndpoint(TICKER_STREAM_STRING_OBJECT_TYPE_WS_API, MyTestExchangeExchange.WS_DEFAULT_WEBSOCKET_CLIENT, TICKER_STREAM_STRING_OBJECT_TYPE_WS_API_MESSAGE_DESERIALIZER);\n"
        + "    this.tickerStreamStringRequestTypeWsEndpoint = createWebsocketEndpoint(TICKER_STREAM_STRING_REQUEST_TYPE_WS_API, MyTestExchangeExchange.WS_DEFAULT_WEBSOCKET_CLIENT, TICKER_STREAM_STRING_REQUEST_TYPE_WS_API_MESSAGE_DESERIALIZER);\n"
        + "  }\n"
        + "  \n"
        + "  // Websocket endpoint subscribe/unsubscribe methods implementations\n"
        + "  @Override\n"
        + "  public String subscribeTickerStreamStringObjectType(MyTestExchangeMarketDataTickerStreamStringObjectTypeRequest request, WebsocketListener<TickerMessage> listener) {\n"
        + "    String topic = EncodingUtil.substituteArguments(\"${request.symbol}@ticker\", \"request.symbol\", request.getSymbol());\n"
        + "    WebsocketMessageTopicMatcherFactory topicMatcherFactory = WSMTMFUtil.and(List.of(\n"
        + "      WSMTMFUtil.value(\"t\", \"ticker\"),\n"
        + "      WSMTMFUtil.value(\"symbol\", EncodingUtil.substituteArguments(\"${request.symbol}\", \"request.symbol\", request.getSymbol()))));\n"
        + "    WebsocketSubscribeRequest subscribeRequest = WebsocketSubscribeRequest.create(request, topic, topicMatcherFactory);\n"
        + "    return tickerStreamStringObjectTypeWsEndpoint.subscribe(subscribeRequest, listener);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public boolean unsubscribeTickerStreamStringObjectType(String subscriptionId) {\n"
        + "    return tickerStreamStringObjectTypeWsEndpoint.unsubscribe(subscriptionId);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public String subscribeTickerStreamStringRequestType(String request, WebsocketListener<TickerMessage> listener) {\n"
        + "    String topic = EncodingUtil.substituteArguments(\"${request}@ticker\", \"request\", request);\n"
        + "    WebsocketMessageTopicMatcherFactory topicMatcherFactory = WSMTMFUtil.and(List.of(\n"
        + "      WSMTMFUtil.value(\"t\", EncodingUtil.substituteArguments(\"${topic}\", \"topic\", topic)),\n"
        + "      WSMTMFUtil.value(\"symbol\", EncodingUtil.substituteArguments(\"${request}\", \"request\", request))));\n"
        + "    WebsocketSubscribeRequest subscribeRequest = WebsocketSubscribeRequest.create(request, topic, topicMatcherFactory);\n"
        + "    return tickerStreamStringRequestTypeWsEndpoint.subscribe(subscribeRequest, listener);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public boolean unsubscribeTickerStreamStringRequestType(String subscriptionId) {\n"
        + "    return tickerStreamStringRequestTypeWsEndpoint.unsubscribe(subscriptionId);\n"
        + "  }\n"
        + "  \n"
        + "}\n"
        + "",
        apiInterfaceGenerator.generate());
  }
  
  @Test
  public void testGenerateExchangeApiSpecificResponseDataTypes() throws Exception {
    ExchangeDescriptor exchangeDescriptor = ExchangeDescriptorParser.fromJson(Paths.get(".", "src", "test", "resources", "testExchangeDescriptorWithAllRestResponseDataTypes.json"));
    ExchangeApiDescriptor exchangeApiDescriptor = exchangeDescriptor.getApis().get(0);
    ExchangeApiInterfaceImplementationGenerator apiInterfaceGenerator = new ExchangeApiInterfaceImplementationGenerator(exchangeDescriptor, exchangeApiDescriptor, PlaceHolderResolver.NO_OP);
    Assert.assertEquals("package com.foo.bar.gen.marketdata;\n"
        + "\n"
        + "import java.math.BigDecimal;\n"
        + "import java.util.List;\n"
        + "import java.util.Map;\n"
        + "\n"
        + "import com.external.pkg.ExternalObject;\n"
        + "import com.foo.bar.gen.MyTestExchangeExchange;\n"
        + "import com.foo.bar.gen.marketdata.pojo.MyTestExchangeMarketDataGetRestResponseDataTypeObjectListMapResponse;\n"
        + "import com.foo.bar.gen.marketdata.pojo.MyTestExchangeMarketDataGetRestResponseDataTypeObjectResponse;\n"
        + "import com.foo.bar.gen.marketdata.pojo.MyTestExchangeMarketDataSubscribeTickerMessage;\n"
        + "import com.foo.bar.gen.marketdata.pojo.MyTestExchangeMarketDataSubscribeTickertMapListStreamMessage;\n"
        + "import com.foo.bar.gen.marketdata.pojo.deserializers.MyTestExchangeMarketDataGetRestResponseDataTypeObjectListMapResponseDeserializer;\n"
        + "import com.foo.bar.gen.marketdata.pojo.deserializers.MyTestExchangeMarketDataGetRestResponseDataTypeObjectResponseDeserializer;\n"
        + "import com.foo.bar.gen.marketdata.pojo.deserializers.MyTestExchangeMarketDataSubscribeTickerMessageDeserializer;\n"
        + "import com.foo.bar.gen.marketdata.pojo.deserializers.MyTestExchangeMarketDataSubscribeTickertMapListStreamMessageDeserializer;\n"
        + "import javax.annotation.processing.Generated;\n"
        + "import org.jxapi.exchange.AbstractExchangeApi;\n"
        + "import org.jxapi.exchange.ExchangeObserver;\n"
        + "import org.jxapi.netutils.deserialization.MessageDeserializer;\n"
        + "import org.jxapi.netutils.deserialization.json.field.BigDecimalJsonFieldDeserializer;\n"
        + "import org.jxapi.netutils.deserialization.json.field.BooleanJsonFieldDeserializer;\n"
        + "import org.jxapi.netutils.deserialization.json.field.GenericObjectJsonFieldDeserializer;\n"
        + "import org.jxapi.netutils.deserialization.json.field.IntegerJsonFieldDeserializer;\n"
        + "import org.jxapi.netutils.deserialization.json.field.ListJsonFieldDeserializer;\n"
        + "import org.jxapi.netutils.deserialization.json.field.LongJsonFieldDeserializer;\n"
        + "import org.jxapi.netutils.deserialization.json.field.MapJsonFieldDeserializer;\n"
        + "import org.jxapi.netutils.deserialization.json.field.RawObjectJsonFieldDeserializer;\n"
        + "import org.jxapi.netutils.deserialization.json.field.StringJsonFieldDeserializer;\n"
        + "import org.jxapi.netutils.rest.FutureRestResponse;\n"
        + "import org.jxapi.netutils.rest.HttpMethod;\n"
        + "import org.jxapi.netutils.rest.HttpRequestUrlParamsSerializer;\n"
        + "import org.jxapi.netutils.rest.RestEndpoint;\n"
        + "import org.jxapi.netutils.websocket.WebsocketEndpoint;\n"
        + "import org.jxapi.netutils.websocket.WebsocketListener;\n"
        + "import org.jxapi.netutils.websocket.WebsocketSubscribeRequest;\n"
        + "import org.jxapi.netutils.websocket.multiplexing.WSMTMFUtil;\n"
        + "import org.jxapi.netutils.websocket.multiplexing.WebsocketMessageTopicMatcherFactory;\n"
        + "import org.jxapi.util.EncodingUtil;\n"
        + "\n"
        + "/**\n"
        + " * Actual implementation of {@link MyTestExchangeMarketDataApi}<br>\n"
        + " */\n"
        + "@Generated(\"org.jxapi.generator.java.exchange.api.ExchangeApiInterfaceImplementationGenerator\")\n"
        + "public class MyTestExchangeMarketDataApiImpl extends AbstractExchangeApi implements MyTestExchangeMarketDataApi {\n"
        + "  \n"
        + "  // Message deserializers\n"
        + "  private static final MessageDeserializer<Integer> GET_REST_RESPONSE_DATA_TYPE_INT_REST_API_RESPONSE_DESERIALIZER = IntegerJsonFieldDeserializer.getInstance();\n"
        + "  private static final MessageDeserializer<Long> GET_REST_RESPONSE_DATA_TYPE_LONG_REST_API_RESPONSE_DESERIALIZER = LongJsonFieldDeserializer.getInstance();\n"
        + "  private static final MessageDeserializer<BigDecimal> GET_REST_RESPONSE_DATA_TYPE_BIG_DECIMAL_REST_API_RESPONSE_DESERIALIZER = BigDecimalJsonFieldDeserializer.getInstance();\n"
        + "  private static final MessageDeserializer<String> GET_REST_RESPONSE_DATA_TYPE_STRING_REST_API_RESPONSE_DESERIALIZER = StringJsonFieldDeserializer.getInstance();\n"
        + "  private static final MessageDeserializer<Boolean> GET_REST_RESPONSE_DATA_TYPE_BOOLEAN_REST_API_RESPONSE_DESERIALIZER = BooleanJsonFieldDeserializer.getInstance();\n"
        + "  private static final MessageDeserializer<MyTestExchangeMarketDataGetRestResponseDataTypeObjectResponse> GET_REST_RESPONSE_DATA_TYPE_OBJECT_REST_API_RESPONSE_DESERIALIZER = new MyTestExchangeMarketDataGetRestResponseDataTypeObjectResponseDeserializer();\n"
        + "  private static final MessageDeserializer<List<Integer>> GET_REST_RESPONSE_DATA_TYPE_INT_LIST_REST_API_RESPONSE_DESERIALIZER = new ListJsonFieldDeserializer<>(IntegerJsonFieldDeserializer.getInstance());\n"
        + "  private static final MessageDeserializer<Map<String, List<MyTestExchangeMarketDataGetRestResponseDataTypeObjectListMapResponse>>> GET_REST_RESPONSE_DATA_TYPE_OBJECT_LIST_MAP_REST_API_RESPONSE_DESERIALIZER = new MapJsonFieldDeserializer<>(new ListJsonFieldDeserializer<>(new MyTestExchangeMarketDataGetRestResponseDataTypeObjectListMapResponseDeserializer()));\n"
        + "  private static final MessageDeserializer<String> GET_REST_EMPTY_RESPONSE_DATA_TYPE_REST_API_RESPONSE_DESERIALIZER = MessageDeserializer.NO_OP;\n"
        + "  private static final MessageDeserializer<Object> GET_REST_RESPONSE_DATA_TYPE_RAW_OBJECT_REST_API_RESPONSE_DESERIALIZER = RawObjectJsonFieldDeserializer.getInstance();\n"
        + "  private static final MessageDeserializer<ExternalObject> GET_REST_RESPONSE_DATA_TYPE_EXTERNAL_OBJECT_REST_API_RESPONSE_DESERIALIZER = new GenericObjectJsonFieldDeserializer<>(ExternalObject.class);\n"
        + "  private static final MessageDeserializer<MyTestExchangeMarketDataSubscribeTickerMessage> SUBSCRIBE_TICKER_WS_API_MESSAGE_DESERIALIZER = new MyTestExchangeMarketDataSubscribeTickerMessageDeserializer();\n"
        + "  private static final MessageDeserializer<List<Map<String, MyTestExchangeMarketDataSubscribeTickertMapListStreamMessage>>> SUBSCRIBE_TICKERT_MAP_LIST_STREAM_WS_API_MESSAGE_DESERIALIZER = new ListJsonFieldDeserializer<>(new MapJsonFieldDeserializer<>(new MyTestExchangeMarketDataSubscribeTickertMapListStreamMessageDeserializer()));\n"
        + "  \n"
        + "  // REST endpoints\n"
        + "  private final RestEndpoint<Void, Integer> getRestResponseDataTypeIntRestEndpoint;\n"
        + "  private final RestEndpoint<Void, Long> getRestResponseDataTypeLongRestEndpoint;\n"
        + "  private final RestEndpoint<Void, BigDecimal> getRestResponseDataTypeBigDecimalRestEndpoint;\n"
        + "  private final RestEndpoint<Void, String> getRestResponseDataTypeStringRestEndpoint;\n"
        + "  private final RestEndpoint<Void, Boolean> getRestResponseDataTypeBooleanRestEndpoint;\n"
        + "  private final RestEndpoint<Void, MyTestExchangeMarketDataGetRestResponseDataTypeObjectResponse> getRestResponseDataTypeObjectRestEndpoint;\n"
        + "  private final RestEndpoint<Void, List<Integer>> getRestResponseDataTypeIntListRestEndpoint;\n"
        + "  private final RestEndpoint<Void, Map<String, List<MyTestExchangeMarketDataGetRestResponseDataTypeObjectListMapResponse>>> getRestResponseDataTypeObjectListMapRestEndpoint;\n"
        + "  private final RestEndpoint<Void, String> getRestEmptyResponseDataTypeRestEndpoint;\n"
        + "  private final RestEndpoint<Void, Object> getRestResponseDataTypeRawObjectRestEndpoint;\n"
        + "  private final RestEndpoint<Void, ExternalObject> getRestResponseDataTypeExternalObjectRestEndpoint;\n"
        + "  \n"
        + "  // Websocket endpoints\n"
        + "  private final WebsocketEndpoint<MyTestExchangeMarketDataSubscribeTickerMessage> subscribeTickerWsEndpoint;\n"
        + "  private final WebsocketEndpoint<List<Map<String, MyTestExchangeMarketDataSubscribeTickertMapListStreamMessage>>> subscribeTickertMapListStreamWsEndpoint;\n"
        + "  \n"
        + "  // Constructor\n"
        + "  /**\n"
        + "   * Constructor\n"
        + "   * \n"
        + "   * @param exchange the exchange instance\n"
        + "   * @param exchangeObserver the exchange API observer to dispatch endpoint events to\n"
        + "   * \n"
        + "   */\n"
        + "  public MyTestExchangeMarketDataApiImpl(MyTestExchangeExchange exchange, ExchangeObserver exchangeObserver) {\n"
        + "    super(ID,\n"
        + "          exchange,\n"
        + "          exchangeObserver,\n"
        + "          null);\n"
        + "    this.getRestResponseDataTypeIntRestEndpoint = createRestEndpoint(GET_REST_RESPONSE_DATA_TYPE_INT_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.getRestResponseDataTypeIntRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.getRestResponseDataTypeIntRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"https://com.sample.mycex/getInt\"));\n"
        + "    this.getRestResponseDataTypeIntRestEndpoint.setUrlParamsSerializer(HttpRequestUrlParamsSerializer.noParams());\n"
        + "    this.getRestResponseDataTypeIntRestEndpoint.setDeserializer(GET_REST_RESPONSE_DATA_TYPE_INT_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.getRestResponseDataTypeLongRestEndpoint = createRestEndpoint(GET_REST_RESPONSE_DATA_TYPE_LONG_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.getRestResponseDataTypeLongRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.getRestResponseDataTypeLongRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"https://com.sample.mycex/getLong\"));\n"
        + "    this.getRestResponseDataTypeLongRestEndpoint.setUrlParamsSerializer(HttpRequestUrlParamsSerializer.noParams());\n"
        + "    this.getRestResponseDataTypeLongRestEndpoint.setDeserializer(GET_REST_RESPONSE_DATA_TYPE_LONG_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.getRestResponseDataTypeBigDecimalRestEndpoint = createRestEndpoint(GET_REST_RESPONSE_DATA_TYPE_BIG_DECIMAL_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.getRestResponseDataTypeBigDecimalRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.getRestResponseDataTypeBigDecimalRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"https://com.sample.mycex/getBigDecimal\"));\n"
        + "    this.getRestResponseDataTypeBigDecimalRestEndpoint.setUrlParamsSerializer(HttpRequestUrlParamsSerializer.noParams());\n"
        + "    this.getRestResponseDataTypeBigDecimalRestEndpoint.setDeserializer(GET_REST_RESPONSE_DATA_TYPE_BIG_DECIMAL_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.getRestResponseDataTypeStringRestEndpoint = createRestEndpoint(GET_REST_RESPONSE_DATA_TYPE_STRING_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.getRestResponseDataTypeStringRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.getRestResponseDataTypeStringRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"https://com.sample.mycex/getString\"));\n"
        + "    this.getRestResponseDataTypeStringRestEndpoint.setUrlParamsSerializer(HttpRequestUrlParamsSerializer.noParams());\n"
        + "    this.getRestResponseDataTypeStringRestEndpoint.setDeserializer(GET_REST_RESPONSE_DATA_TYPE_STRING_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.getRestResponseDataTypeBooleanRestEndpoint = createRestEndpoint(GET_REST_RESPONSE_DATA_TYPE_BOOLEAN_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.getRestResponseDataTypeBooleanRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.getRestResponseDataTypeBooleanRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"https://com.sample.mycex/getBigDecimal\"));\n"
        + "    this.getRestResponseDataTypeBooleanRestEndpoint.setUrlParamsSerializer(HttpRequestUrlParamsSerializer.noParams());\n"
        + "    this.getRestResponseDataTypeBooleanRestEndpoint.setDeserializer(GET_REST_RESPONSE_DATA_TYPE_BOOLEAN_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.getRestResponseDataTypeObjectRestEndpoint = createRestEndpoint(GET_REST_RESPONSE_DATA_TYPE_OBJECT_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.getRestResponseDataTypeObjectRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.getRestResponseDataTypeObjectRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"https://com.sample.mycex/getBigDecimal\"));\n"
        + "    this.getRestResponseDataTypeObjectRestEndpoint.setUrlParamsSerializer(HttpRequestUrlParamsSerializer.noParams());\n"
        + "    this.getRestResponseDataTypeObjectRestEndpoint.setDeserializer(GET_REST_RESPONSE_DATA_TYPE_OBJECT_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.getRestResponseDataTypeIntListRestEndpoint = createRestEndpoint(GET_REST_RESPONSE_DATA_TYPE_INT_LIST_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.getRestResponseDataTypeIntListRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.getRestResponseDataTypeIntListRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"https://com.sample.mycex/getIntList\"));\n"
        + "    this.getRestResponseDataTypeIntListRestEndpoint.setUrlParamsSerializer(HttpRequestUrlParamsSerializer.noParams());\n"
        + "    this.getRestResponseDataTypeIntListRestEndpoint.setDeserializer(GET_REST_RESPONSE_DATA_TYPE_INT_LIST_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.getRestResponseDataTypeObjectListMapRestEndpoint = createRestEndpoint(GET_REST_RESPONSE_DATA_TYPE_OBJECT_LIST_MAP_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.getRestResponseDataTypeObjectListMapRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.getRestResponseDataTypeObjectListMapRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"https://com.sample.mycex/getObjectlistMap\"));\n"
        + "    this.getRestResponseDataTypeObjectListMapRestEndpoint.setUrlParamsSerializer(HttpRequestUrlParamsSerializer.noParams());\n"
        + "    this.getRestResponseDataTypeObjectListMapRestEndpoint.setDeserializer(GET_REST_RESPONSE_DATA_TYPE_OBJECT_LIST_MAP_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.getRestEmptyResponseDataTypeRestEndpoint = createRestEndpoint(GET_REST_EMPTY_RESPONSE_DATA_TYPE_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.getRestEmptyResponseDataTypeRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.getRestEmptyResponseDataTypeRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"https://com.sample.mycex/getEmptyResponse\"));\n"
        + "    this.getRestEmptyResponseDataTypeRestEndpoint.setUrlParamsSerializer(HttpRequestUrlParamsSerializer.noParams());\n"
        + "    this.getRestEmptyResponseDataTypeRestEndpoint.setDeserializer(GET_REST_EMPTY_RESPONSE_DATA_TYPE_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.getRestResponseDataTypeRawObjectRestEndpoint = createRestEndpoint(GET_REST_RESPONSE_DATA_TYPE_RAW_OBJECT_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.getRestResponseDataTypeRawObjectRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.getRestResponseDataTypeRawObjectRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"https://com.sample.mycex/getEmptyResponse\"));\n"
        + "    this.getRestResponseDataTypeRawObjectRestEndpoint.setUrlParamsSerializer(HttpRequestUrlParamsSerializer.noParams());\n"
        + "    this.getRestResponseDataTypeRawObjectRestEndpoint.setDeserializer(GET_REST_RESPONSE_DATA_TYPE_RAW_OBJECT_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.getRestResponseDataTypeExternalObjectRestEndpoint = createRestEndpoint(GET_REST_RESPONSE_DATA_TYPE_EXTERNAL_OBJECT_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.getRestResponseDataTypeExternalObjectRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.getRestResponseDataTypeExternalObjectRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"https://com.sample.mycex/getStringList\"));\n"
        + "    this.getRestResponseDataTypeExternalObjectRestEndpoint.setUrlParamsSerializer(HttpRequestUrlParamsSerializer.noParams());\n"
        + "    this.getRestResponseDataTypeExternalObjectRestEndpoint.setDeserializer(GET_REST_RESPONSE_DATA_TYPE_EXTERNAL_OBJECT_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.subscribeTickerWsEndpoint = createWebsocketEndpoint(SUBSCRIBE_TICKER_WS_API, MyTestExchangeExchange.WS_DEFAULT_WEBSOCKET_CLIENT, SUBSCRIBE_TICKER_WS_API_MESSAGE_DESERIALIZER);\n"
        + "    this.subscribeTickertMapListStreamWsEndpoint = createWebsocketEndpoint(SUBSCRIBE_TICKERT_MAP_LIST_STREAM_WS_API, MyTestExchangeExchange.WS_DEFAULT_WEBSOCKET_CLIENT, SUBSCRIBE_TICKERT_MAP_LIST_STREAM_WS_API_MESSAGE_DESERIALIZER);\n"
        + "  }\n"
        + "  \n"
        + "  // REST endpoint method call implementations\n"
        + "  @Override\n"
        + "  public FutureRestResponse<Integer> getRestResponseDataTypeInt() {\n"
        + "    return getRestResponseDataTypeIntRestEndpoint.submit(null);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<Long> getRestResponseDataTypeLong() {\n"
        + "    return getRestResponseDataTypeLongRestEndpoint.submit(null);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<BigDecimal> getRestResponseDataTypeBigDecimal() {\n"
        + "    return getRestResponseDataTypeBigDecimalRestEndpoint.submit(null);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<String> getRestResponseDataTypeString() {\n"
        + "    return getRestResponseDataTypeStringRestEndpoint.submit(null);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<Boolean> getRestResponseDataTypeBoolean() {\n"
        + "    return getRestResponseDataTypeBooleanRestEndpoint.submit(null);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<MyTestExchangeMarketDataGetRestResponseDataTypeObjectResponse> getRestResponseDataTypeObject() {\n"
        + "    return getRestResponseDataTypeObjectRestEndpoint.submit(null);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<List<Integer>> getRestResponseDataTypeIntList() {\n"
        + "    return getRestResponseDataTypeIntListRestEndpoint.submit(null);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<Map<String, List<MyTestExchangeMarketDataGetRestResponseDataTypeObjectListMapResponse>>> getRestResponseDataTypeObjectListMap() {\n"
        + "    return getRestResponseDataTypeObjectListMapRestEndpoint.submit(null);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<String> getRestEmptyResponseDataType() {\n"
        + "    return getRestEmptyResponseDataTypeRestEndpoint.submit(null);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<Object> getRestResponseDataTypeRawObject() {\n"
        + "    return getRestResponseDataTypeRawObjectRestEndpoint.submit(null);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<ExternalObject> getRestResponseDataTypeExternalObject() {\n"
        + "    return getRestResponseDataTypeExternalObjectRestEndpoint.submit(null);\n"
        + "  }\n"
        + "  \n"
        + "  \n"
        + "  // Websocket endpoint subscribe/unsubscribe methods implementations\n"
        + "  @Override\n"
        + "  public String subscribeSubscribeTicker(WebsocketListener<MyTestExchangeMarketDataSubscribeTickerMessage> listener) {\n"
        + "    String topic = \"subscribeTickerTopic\";\n"
        + "    WebsocketMessageTopicMatcherFactory topicMatcherFactory = WSMTMFUtil.value(\"t\", \"tickerMapList\");\n"
        + "    WebsocketSubscribeRequest subscribeRequest = WebsocketSubscribeRequest.create(null, topic, topicMatcherFactory);\n"
        + "    return subscribeTickerWsEndpoint.subscribe(subscribeRequest, listener);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public boolean unsubscribeSubscribeTicker(String subscriptionId) {\n"
        + "    return subscribeTickerWsEndpoint.unsubscribe(subscriptionId);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public String subscribeSubscribeTickertMapListStream(WebsocketListener<List<Map<String, MyTestExchangeMarketDataSubscribeTickertMapListStreamMessage>>> listener) {\n"
        + "    String topic = \"subscribeTickerMapListTopic\";\n"
        + "    WebsocketMessageTopicMatcherFactory topicMatcherFactory = WSMTMFUtil.value(\"t\", \"tickerMapList\");\n"
        + "    WebsocketSubscribeRequest subscribeRequest = WebsocketSubscribeRequest.create(null, topic, topicMatcherFactory);\n"
        + "    return subscribeTickertMapListStreamWsEndpoint.subscribe(subscribeRequest, listener);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public boolean unsubscribeSubscribeTickertMapListStream(String subscriptionId) {\n"
        + "    return subscribeTickertMapListStreamWsEndpoint.unsubscribe(subscriptionId);\n"
        + "  }\n"
        + "  \n"
        + "}\n"
        + "",
        apiInterfaceGenerator.generate());
  }
  
  @Test
  public void testGenerateExchangeApiSpecificRequestDataTypes() throws Exception {
    ExchangeDescriptor exchangeDescriptor = ExchangeDescriptorParser.fromJson(Paths.get(".", "src", "test", "resources", "testExchangeDescriptorWithAllRestRequestDataTypes.json"));
    ExchangeApiDescriptor exchangeApiDescriptor = exchangeDescriptor.getApis().get(0);
    ExchangeApiInterfaceImplementationGenerator apiInterfaceGenerator = new ExchangeApiInterfaceImplementationGenerator(exchangeDescriptor, exchangeApiDescriptor, PlaceHolderResolver.NO_OP);
    Assert.assertEquals("package com.foo.bar.gen.marketdata;\n"
        + "\n"
        + "import java.math.BigDecimal;\n"
        + "import java.util.List;\n"
        + "import java.util.Map;\n"
        + "import java.util.Optional;\n"
        + "\n"
        + "import com.external.pkg.ExternalObject;\n"
        + "import com.foo.bar.gen.MyTestExchangeConstants;\n"
        + "import com.foo.bar.gen.MyTestExchangeExchange;\n"
        + "import com.foo.bar.gen.marketdata.pojo.GenericResponse;\n"
        + "import com.foo.bar.gen.marketdata.pojo.MultiSymbol;\n"
        + "import com.foo.bar.gen.marketdata.pojo.MyTestExchangeMarketDataGetRestRequestDataTypeWithBothPathAndQueryParamsRequest;\n"
        + "import com.foo.bar.gen.marketdata.pojo.MyTestExchangeMarketDataPostRestRequestDataTypeObjectOneParameterRequest;\n"
        + "import com.foo.bar.gen.marketdata.pojo.SingleSymbol;\n"
        + "import com.foo.bar.gen.marketdata.pojo.Ticker;\n"
        + "import com.foo.bar.gen.marketdata.pojo.deserializers.GenericResponseDeserializer;\n"
        + "import com.foo.bar.gen.marketdata.pojo.deserializers.TickerDeserializer;\n"
        + "import com.foo.bar.gen.marketdata.pojo.serializers.MyTestExchangeMarketDataPostRestRequestDataTypeObjectOneParameterRequestSerializer;\n"
        + "import com.foo.bar.gen.marketdata.pojo.serializers.SingleSymbolSerializer;\n"
        + "import javax.annotation.processing.Generated;\n"
        + "import org.jxapi.exchange.AbstractExchangeApi;\n"
        + "import org.jxapi.exchange.ExchangeObserver;\n"
        + "import org.jxapi.netutils.deserialization.MessageDeserializer;\n"
        + "import org.jxapi.netutils.deserialization.json.field.IntegerJsonFieldDeserializer;\n"
        + "import org.jxapi.netutils.deserialization.json.field.ListJsonFieldDeserializer;\n"
        + "import org.jxapi.netutils.rest.FutureRestResponse;\n"
        + "import org.jxapi.netutils.rest.HttpMethod;\n"
        + "import org.jxapi.netutils.rest.HttpRequestUrlParamsSerializer;\n"
        + "import org.jxapi.netutils.rest.RestEndpoint;\n"
        + "import org.jxapi.netutils.serialization.MessageSerializer;\n"
        + "import org.jxapi.netutils.serialization.json.BigDecimalJsonValueSerializer;\n"
        + "import org.jxapi.netutils.serialization.json.BooleanJsonValueSerializer;\n"
        + "import org.jxapi.netutils.serialization.json.IntegerJsonValueSerializer;\n"
        + "import org.jxapi.netutils.serialization.json.ListJsonValueSerializer;\n"
        + "import org.jxapi.netutils.serialization.json.LongJsonValueSerializer;\n"
        + "import org.jxapi.netutils.serialization.json.MapJsonValueSerializer;\n"
        + "import org.jxapi.netutils.serialization.json.ObjectJsonValueSerializer;\n"
        + "import org.jxapi.netutils.serialization.json.StringJsonValueSerializer;\n"
        + "import org.jxapi.netutils.websocket.WebsocketEndpoint;\n"
        + "import org.jxapi.netutils.websocket.WebsocketListener;\n"
        + "import org.jxapi.netutils.websocket.WebsocketSubscribeRequest;\n"
        + "import org.jxapi.netutils.websocket.multiplexing.WSMTMFUtil;\n"
        + "import org.jxapi.netutils.websocket.multiplexing.WebsocketMessageTopicMatcherFactory;\n"
        + "import org.jxapi.util.EncodingUtil;\n"
        + "import org.jxapi.util.JsonUtil;\n"
        + "\n"
        + "/**\n"
        + " * Actual implementation of {@link MyTestExchangeMarketDataApi}<br>\n"
        + " */\n"
        + "@Generated(\"org.jxapi.generator.java.exchange.api.ExchangeApiInterfaceImplementationGenerator\")\n"
        + "public class MyTestExchangeMarketDataApiImpl extends AbstractExchangeApi implements MyTestExchangeMarketDataApi {\n"
        + "  \n"
        + "  // REST endpoint request default values\n"
        + "  \n"
        + "  /**\n"
        + "   * Default value for <code>postRestRequestDataTypeIntListWithDefaultValueRestRequest</code>\n"
        + "   */\n"
        + "  public static final List<Integer> POST_REST_REQUEST_DATA_TYPE_INT_LIST_WITH_DEFAULT_VALUE_REST_REQUEST_DEFAULT_VALUE = new ListJsonFieldDeserializer<>(IntegerJsonFieldDeserializer.getInstance()).deserialize(\"[2,4,6]\");\n"
        + "  \n"
        + "  // Websocket endpoint request default values\n"
        + "  \n"
        + "  /**\n"
        + "   * Default value for <code>streamWithLongRequestDataTypeWsRequest</code>\n"
        + "   */\n"
        + "  public static final Long STREAM_WITH_LONG_REQUEST_DATA_TYPE_WS_REQUEST_DEFAULT_VALUE = Long.valueOf(EncodingUtil.substituteArguments(\"${constants.myLongConst}\", \"constants.myLongConst\", MyTestExchangeConstants.MY_LONG_CONST));\n"
        + "  \n"
        + "  // REST endpoints URL parameter serializers\n"
        + "  private static final HttpRequestUrlParamsSerializer<Integer> POST_REST_REQUEST_DATA_TYPE_INT_REST_API_URL_PARAMS_SERIALIZER = HttpRequestUrlParamsSerializer.noParams();\n"
        + "  private static final HttpRequestUrlParamsSerializer<Long> POST_REST_REQUEST_DATA_TYPE_LONG_REST_API_URL_PARAMS_SERIALIZER = HttpRequestUrlParamsSerializer.noParams();\n"
        + "  private static final HttpRequestUrlParamsSerializer<BigDecimal> POST_REST_REQUEST_DATA_TYPE_BIG_DECIMAL_REST_API_URL_PARAMS_SERIALIZER = HttpRequestUrlParamsSerializer.noParams();\n"
        + "  private static final HttpRequestUrlParamsSerializer<String> POST_REST_REQUEST_DATA_TYPE_STRING_IMPLICIT_REST_API_URL_PARAMS_SERIALIZER = HttpRequestUrlParamsSerializer.noParams();\n"
        + "  private static final HttpRequestUrlParamsSerializer<Integer> POST_REST_REQUEST_DATA_TYPE_INT_IMPLICIT_AS_PATH_PARAM_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlPathParameters(request)).toString();\n"
        + "  private static final HttpRequestUrlParamsSerializer<Boolean> POST_REST_REQUEST_DATA_TYPE_BOOLEAN_REST_API_URL_PARAMS_SERIALIZER = HttpRequestUrlParamsSerializer.noParams();\n"
        + "  private static final HttpRequestUrlParamsSerializer<MyTestExchangeMarketDataPostRestRequestDataTypeObjectOneParameterRequest> POST_REST_REQUEST_DATA_TYPE_OBJECT_ONE_PARAMETER_REST_API_URL_PARAMS_SERIALIZER = HttpRequestUrlParamsSerializer.noParams();\n"
        + "  private static final HttpRequestUrlParamsSerializer<List<Integer>> POST_REST_REQUEST_DATA_TYPE_INT_LIST_WITH_DEFAULT_VALUE_REST_API_URL_PARAMS_SERIALIZER = HttpRequestUrlParamsSerializer.noParams();\n"
        + "  private static final HttpRequestUrlParamsSerializer<Map<String, List<SingleSymbol>>> POST_REST_REQUEST_DATA_TYPE_OBJECT_LIST_MAP_REST_API_URL_PARAMS_SERIALIZER = HttpRequestUrlParamsSerializer.noParams();\n"
        + "  private static final HttpRequestUrlParamsSerializer<Map<String, List<SingleSymbol>>> DELETET_REST_REQUEST_DATA_TYPE_OBJECT_AS_BODY_REST_API_URL_PARAMS_SERIALIZER = HttpRequestUrlParamsSerializer.noParams();\n"
        + "  private static final HttpRequestUrlParamsSerializer<Map<String, List<SingleSymbol>>> DELETET_REST_REQUEST_DATA_TYPE_OBJECT_AS_QUERY_PARAMS_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"request\", JsonUtil.pojoToJsonString(request))).toString();\n"
        + "  private static final HttpRequestUrlParamsSerializer<Map<String, List<MultiSymbol>>> GET_REST_REQUEST_DATA_TYPE_OBJECT_LIST_MAP_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"request\", JsonUtil.pojoToJsonString(request))).toString();\n"
        + "  private static final HttpRequestUrlParamsSerializer<ExternalObject> GET_REST_REQUEST_DATA_TYPE_EXTERNAL_OBJECT_REST_API_URL_PARAMS_SERIALIZER = HttpRequestUrlParamsSerializer.noParams();\n"
        + "  private static final HttpRequestUrlParamsSerializer<Object> POST_REST_REQUEST_DATA_TYPE_RAW_OBJECT_REST_API_URL_PARAMS_SERIALIZER = HttpRequestUrlParamsSerializer.noParams();\n"
        + "  private static final HttpRequestUrlParamsSerializer<Integer> GET_REST_REQUEST_DATA_TYPE_PRIMITIVE_WITH_MSG_FIELD_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"a\", request)).toString();\n"
        + "  private static final HttpRequestUrlParamsSerializer<Integer> GET_REST_REQUEST_DATA_TYPE_PRIMITIVE_WITH_MSG_FIELD_AS_PATH_P_ARAM_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlPathParameters(request)).toString();\n"
        + "  private static final HttpRequestUrlParamsSerializer<MyTestExchangeMarketDataGetRestRequestDataTypeWithBothPathAndQueryParamsRequest> GET_REST_REQUEST_DATA_TYPE_WITH_BOTH_PATH_AND_QUERY_PARAMS_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlPathParameters(request.getName(), request.getAddress().getCity()))\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"i\", request.getId(), \"street\", request.getAddress().getStreet())).toString();\n"
        + "  \n"
        + "  // Request serializers\n"
        + "  private static final MessageSerializer<Integer> POST_REST_REQUEST_DATA_TYPE_INT_REST_API_REQUEST_SERIALIZER = IntegerJsonValueSerializer.getInstance();\n"
        + "  private static final MessageSerializer<Long> POST_REST_REQUEST_DATA_TYPE_LONG_REST_API_REQUEST_SERIALIZER = LongJsonValueSerializer.getInstance();\n"
        + "  private static final MessageSerializer<BigDecimal> POST_REST_REQUEST_DATA_TYPE_BIG_DECIMAL_REST_API_REQUEST_SERIALIZER = BigDecimalJsonValueSerializer.getInstance();\n"
        + "  private static final MessageSerializer<String> POST_REST_REQUEST_DATA_TYPE_STRING_IMPLICIT_REST_API_REQUEST_SERIALIZER = StringJsonValueSerializer.getInstance();\n"
        + "  private static final MessageSerializer<Boolean> POST_REST_REQUEST_DATA_TYPE_BOOLEAN_REST_API_REQUEST_SERIALIZER = BooleanJsonValueSerializer.getInstance();\n"
        + "  private static final MessageSerializer<MyTestExchangeMarketDataPostRestRequestDataTypeObjectOneParameterRequest> POST_REST_REQUEST_DATA_TYPE_OBJECT_ONE_PARAMETER_REST_API_REQUEST_SERIALIZER = new MyTestExchangeMarketDataPostRestRequestDataTypeObjectOneParameterRequestSerializer();\n"
        + "  private static final MessageSerializer<List<Integer>> POST_REST_REQUEST_DATA_TYPE_INT_LIST_WITH_DEFAULT_VALUE_REST_API_REQUEST_SERIALIZER = new ListJsonValueSerializer<>(IntegerJsonValueSerializer.getInstance());\n"
        + "  private static final MessageSerializer<Map<String, List<SingleSymbol>>> POST_REST_REQUEST_DATA_TYPE_OBJECT_LIST_MAP_REST_API_REQUEST_SERIALIZER = new MapJsonValueSerializer<>(new ListJsonValueSerializer<>(new SingleSymbolSerializer()));\n"
        + "  private static final MessageSerializer<Map<String, List<SingleSymbol>>> DELETET_REST_REQUEST_DATA_TYPE_OBJECT_AS_BODY_REST_API_REQUEST_SERIALIZER = new MapJsonValueSerializer<>(new ListJsonValueSerializer<>(new SingleSymbolSerializer()));\n"
        + "  private static final MessageSerializer<ExternalObject> GET_REST_REQUEST_DATA_TYPE_EXTERNAL_OBJECT_REST_API_REQUEST_SERIALIZER = ObjectJsonValueSerializer.getInstance();\n"
        + "  private static final MessageSerializer<Object> POST_REST_REQUEST_DATA_TYPE_RAW_OBJECT_REST_API_REQUEST_SERIALIZER = ObjectJsonValueSerializer.getInstance();\n"
        + "  \n"
        + "  // Message deserializers\n"
        + "  private static final MessageDeserializer<GenericResponse> POST_REST_REQUEST_DATA_TYPE_INT_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> POST_REST_REQUEST_DATA_TYPE_LONG_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> POST_REST_REQUEST_DATA_TYPE_BIG_DECIMAL_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> POST_REST_REQUEST_DATA_TYPE_STRING_IMPLICIT_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> POST_REST_REQUEST_DATA_TYPE_INT_IMPLICIT_AS_PATH_PARAM_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> POST_REST_REQUEST_DATA_TYPE_BOOLEAN_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> POST_REST_REQUEST_NO_PARAMETERS_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> POST_REST_REQUEST_DATA_TYPE_OBJECT_ONE_PARAMETER_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> POST_REST_REQUEST_DATA_TYPE_INT_LIST_WITH_DEFAULT_VALUE_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> POST_REST_REQUEST_DATA_TYPE_OBJECT_LIST_MAP_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> DELETET_REST_REQUEST_DATA_TYPE_OBJECT_AS_BODY_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> DELETET_REST_REQUEST_DATA_TYPE_OBJECT_AS_QUERY_PARAMS_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> GET_REST_REQUEST_DATA_TYPE_OBJECT_LIST_MAP_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> GET_REST_REQUEST_DATA_TYPE_EMPTY_OBJECT_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> GET_REST_REQUEST_DATA_TYPE_EXTERNAL_OBJECT_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> POST_REST_REQUEST_DATA_TYPE_RAW_OBJECT_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> GET_REST_REQUEST_DATA_TYPE_PRIMITIVE_WITH_MSG_FIELD_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> GET_REST_REQUEST_DATA_TYPE_PRIMITIVE_WITH_MSG_FIELD_AS_PATH_P_ARAM_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> GET_REST_REQUEST_DATA_TYPE_WITH_BOTH_PATH_AND_QUERY_PARAMS_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<Ticker> STREAM_WITH_OBJECT_REQUEST_DATA_TYPE_ZERO_PARAMETERS_WS_API_MESSAGE_DESERIALIZER = new TickerDeserializer();\n"
        + "  private static final MessageDeserializer<Ticker> STREAM_WITH_OBJECT_REQUEST_DATA_TYPE_ONE_PARAMETER_WS_API_MESSAGE_DESERIALIZER = new TickerDeserializer();\n"
        + "  private static final MessageDeserializer<Ticker> STREAM_WITH_INT_REQUEST_DATA_TYPE_WS_API_MESSAGE_DESERIALIZER = new TickerDeserializer();\n"
        + "  private static final MessageDeserializer<Ticker> STREAM_WITH_LONG_REQUEST_DATA_TYPE_WS_API_MESSAGE_DESERIALIZER = new TickerDeserializer();\n"
        + "  private static final MessageDeserializer<Ticker> STREAM_WITH_BIG_DECIMAL_REQUEST_DATA_TYPE_WS_API_MESSAGE_DESERIALIZER = new TickerDeserializer();\n"
        + "  private static final MessageDeserializer<Ticker> STREAM_WITH_STRING_REQUEST_DATA_TYPE_WS_API_MESSAGE_DESERIALIZER = new TickerDeserializer();\n"
        + "  private static final MessageDeserializer<Ticker> STREAM_WITH_BOOLEAN_REQUEST_DATA_TYPE_WS_API_MESSAGE_DESERIALIZER = new TickerDeserializer();\n"
        + "  private static final MessageDeserializer<Ticker> STREAM_WITH_STRING_LIST_REQUEST_DATA_TYPE_WS_API_MESSAGE_DESERIALIZER = new TickerDeserializer();\n"
        + "  private static final MessageDeserializer<Ticker> STREAM_WITH_OBJECT_LIST_MAP_REQUEST_DATA_TYPE_WS_API_MESSAGE_DESERIALIZER = new TickerDeserializer();\n"
        + "  private static final MessageDeserializer<Ticker> STREAM_WITH_NULL_TOPIC_AND_NULL_REQUEST_WS_API_MESSAGE_DESERIALIZER = new TickerDeserializer();\n"
        + "  private static final MessageDeserializer<Ticker> STREAM_WITH_NULL_TOPIC_AND_PRIMITIVE_TYPE_REQUEST_WS_API_MESSAGE_DESERIALIZER = new TickerDeserializer();\n"
        + "  \n"
        + "  // REST endpoints\n"
        + "  private final RestEndpoint<Integer, GenericResponse> postRestRequestDataTypeIntRestEndpoint;\n"
        + "  private final RestEndpoint<Long, GenericResponse> postRestRequestDataTypeLongRestEndpoint;\n"
        + "  private final RestEndpoint<BigDecimal, GenericResponse> postRestRequestDataTypeBigDecimalRestEndpoint;\n"
        + "  private final RestEndpoint<String, GenericResponse> postRestRequestDataTypeStringImplicitRestEndpoint;\n"
        + "  private final RestEndpoint<Integer, GenericResponse> postRestRequestDataTypeIntImplicitAsPathParamRestEndpoint;\n"
        + "  private final RestEndpoint<Boolean, GenericResponse> postRestRequestDataTypeBooleanRestEndpoint;\n"
        + "  private final RestEndpoint<String, GenericResponse> postRestRequestNoParametersRestEndpoint;\n"
        + "  private final RestEndpoint<MyTestExchangeMarketDataPostRestRequestDataTypeObjectOneParameterRequest, GenericResponse> postRestRequestDataTypeObjectOneParameterRestEndpoint;\n"
        + "  private final RestEndpoint<List<Integer>, GenericResponse> postRestRequestDataTypeIntListWithDefaultValueRestEndpoint;\n"
        + "  private final RestEndpoint<Map<String, List<SingleSymbol>>, GenericResponse> postRestRequestDataTypeObjectListMapRestEndpoint;\n"
        + "  private final RestEndpoint<Map<String, List<SingleSymbol>>, GenericResponse> deletetRestRequestDataTypeObjectAsBodyRestEndpoint;\n"
        + "  private final RestEndpoint<Map<String, List<SingleSymbol>>, GenericResponse> deletetRestRequestDataTypeObjectAsQueryParamsRestEndpoint;\n"
        + "  private final RestEndpoint<Map<String, List<MultiSymbol>>, GenericResponse> getRestRequestDataTypeObjectListMapRestEndpoint;\n"
        + "  private final RestEndpoint<Void, GenericResponse> getRestRequestDataTypeEmptyObjectRestEndpoint;\n"
        + "  private final RestEndpoint<ExternalObject, GenericResponse> getRestRequestDataTypeExternalObjectRestEndpoint;\n"
        + "  private final RestEndpoint<Object, GenericResponse> postRestRequestDataTypeRawObjectRestEndpoint;\n"
        + "  private final RestEndpoint<Integer, GenericResponse> getRestRequestDataTypePrimitiveWithMsgFieldRestEndpoint;\n"
        + "  private final RestEndpoint<Integer, GenericResponse> getRestRequestDataTypePrimitiveWithMsgFieldAsPathPAramRestEndpoint;\n"
        + "  private final RestEndpoint<MyTestExchangeMarketDataGetRestRequestDataTypeWithBothPathAndQueryParamsRequest, GenericResponse> getRestRequestDataTypeWithBothPathAndQueryParamsRestEndpoint;\n"
        + "  \n"
        + "  // Websocket endpoints\n"
        + "  private final WebsocketEndpoint<Ticker> streamWithObjectRequestDataTypeZeroParametersWsEndpoint;\n"
        + "  private final WebsocketEndpoint<Ticker> streamWithObjectRequestDataTypeOneParameterWsEndpoint;\n"
        + "  private final WebsocketEndpoint<Ticker> streamWithIntRequestDataTypeWsEndpoint;\n"
        + "  private final WebsocketEndpoint<Ticker> streamWithLongRequestDataTypeWsEndpoint;\n"
        + "  private final WebsocketEndpoint<Ticker> streamWithBigDecimalRequestDataTypeWsEndpoint;\n"
        + "  private final WebsocketEndpoint<Ticker> streamWithStringRequestDataTypeWsEndpoint;\n"
        + "  private final WebsocketEndpoint<Ticker> streamWithBooleanRequestDataTypeWsEndpoint;\n"
        + "  private final WebsocketEndpoint<Ticker> streamWithStringListRequestDataTypeWsEndpoint;\n"
        + "  private final WebsocketEndpoint<Ticker> streamWithObjectListMapRequestDataTypeWsEndpoint;\n"
        + "  private final WebsocketEndpoint<Ticker> streamWithNullTopicAndNullRequestWsEndpoint;\n"
        + "  private final WebsocketEndpoint<Ticker> streamWithNullTopicAndPrimitiveTypeRequestWsEndpoint;\n"
        + "  \n"
        + "  // Constructor\n"
        + "  /**\n"
        + "   * Constructor\n"
        + "   * \n"
        + "   * @param exchange the exchange instance\n"
        + "   * @param exchangeObserver the exchange API observer to dispatch endpoint events to\n"
        + "   * \n"
        + "   */\n"
        + "  public MyTestExchangeMarketDataApiImpl(MyTestExchangeExchange exchange, ExchangeObserver exchangeObserver) {\n"
        + "    super(ID,\n"
        + "          exchange,\n"
        + "          exchangeObserver,\n"
        + "          null);\n"
        + "    this.postRestRequestDataTypeIntRestEndpoint = createRestEndpoint(POST_REST_REQUEST_DATA_TYPE_INT_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.postRestRequestDataTypeIntRestEndpoint.setHttpMethod(HttpMethod.POST);\n"
        + "    this.postRestRequestDataTypeIntRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/postInt\"));\n"
        + "    this.postRestRequestDataTypeIntRestEndpoint.setUrlParamsSerializer(POST_REST_REQUEST_DATA_TYPE_INT_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.postRestRequestDataTypeIntRestEndpoint.setSerializer(POST_REST_REQUEST_DATA_TYPE_INT_REST_API_REQUEST_SERIALIZER);\n"
        + "    this.postRestRequestDataTypeIntRestEndpoint.setDeserializer(POST_REST_REQUEST_DATA_TYPE_INT_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.postRestRequestDataTypeLongRestEndpoint = createRestEndpoint(POST_REST_REQUEST_DATA_TYPE_LONG_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.postRestRequestDataTypeLongRestEndpoint.setHttpMethod(HttpMethod.POST);\n"
        + "    this.postRestRequestDataTypeLongRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/postLong\"));\n"
        + "    this.postRestRequestDataTypeLongRestEndpoint.setUrlParamsSerializer(POST_REST_REQUEST_DATA_TYPE_LONG_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.postRestRequestDataTypeLongRestEndpoint.setSerializer(POST_REST_REQUEST_DATA_TYPE_LONG_REST_API_REQUEST_SERIALIZER);\n"
        + "    this.postRestRequestDataTypeLongRestEndpoint.setDeserializer(POST_REST_REQUEST_DATA_TYPE_LONG_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.postRestRequestDataTypeBigDecimalRestEndpoint = createRestEndpoint(POST_REST_REQUEST_DATA_TYPE_BIG_DECIMAL_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.postRestRequestDataTypeBigDecimalRestEndpoint.setHttpMethod(HttpMethod.POST);\n"
        + "    this.postRestRequestDataTypeBigDecimalRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/postBigDecimal\"));\n"
        + "    this.postRestRequestDataTypeBigDecimalRestEndpoint.setUrlParamsSerializer(POST_REST_REQUEST_DATA_TYPE_BIG_DECIMAL_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.postRestRequestDataTypeBigDecimalRestEndpoint.setSerializer(POST_REST_REQUEST_DATA_TYPE_BIG_DECIMAL_REST_API_REQUEST_SERIALIZER);\n"
        + "    this.postRestRequestDataTypeBigDecimalRestEndpoint.setDeserializer(POST_REST_REQUEST_DATA_TYPE_BIG_DECIMAL_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.postRestRequestDataTypeStringImplicitRestEndpoint = createRestEndpoint(POST_REST_REQUEST_DATA_TYPE_STRING_IMPLICIT_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.postRestRequestDataTypeStringImplicitRestEndpoint.setHttpMethod(HttpMethod.POST);\n"
        + "    this.postRestRequestDataTypeStringImplicitRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/postString\"));\n"
        + "    this.postRestRequestDataTypeStringImplicitRestEndpoint.setUrlParamsSerializer(POST_REST_REQUEST_DATA_TYPE_STRING_IMPLICIT_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.postRestRequestDataTypeStringImplicitRestEndpoint.setSerializer(POST_REST_REQUEST_DATA_TYPE_STRING_IMPLICIT_REST_API_REQUEST_SERIALIZER);\n"
        + "    this.postRestRequestDataTypeStringImplicitRestEndpoint.setDeserializer(POST_REST_REQUEST_DATA_TYPE_STRING_IMPLICIT_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.postRestRequestDataTypeIntImplicitAsPathParamRestEndpoint = createRestEndpoint(POST_REST_REQUEST_DATA_TYPE_INT_IMPLICIT_AS_PATH_PARAM_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.postRestRequestDataTypeIntImplicitAsPathParamRestEndpoint.setHttpMethod(HttpMethod.POST);\n"
        + "    this.postRestRequestDataTypeIntImplicitAsPathParamRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/postIntAsPathParam\"));\n"
        + "    this.postRestRequestDataTypeIntImplicitAsPathParamRestEndpoint.setUrlParamsSerializer(POST_REST_REQUEST_DATA_TYPE_INT_IMPLICIT_AS_PATH_PARAM_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.postRestRequestDataTypeIntImplicitAsPathParamRestEndpoint.setDeserializer(POST_REST_REQUEST_DATA_TYPE_INT_IMPLICIT_AS_PATH_PARAM_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.postRestRequestDataTypeBooleanRestEndpoint = createRestEndpoint(POST_REST_REQUEST_DATA_TYPE_BOOLEAN_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.postRestRequestDataTypeBooleanRestEndpoint.setHttpMethod(HttpMethod.POST);\n"
        + "    this.postRestRequestDataTypeBooleanRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/postBoolean\"));\n"
        + "    this.postRestRequestDataTypeBooleanRestEndpoint.setUrlParamsSerializer(POST_REST_REQUEST_DATA_TYPE_BOOLEAN_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.postRestRequestDataTypeBooleanRestEndpoint.setSerializer(POST_REST_REQUEST_DATA_TYPE_BOOLEAN_REST_API_REQUEST_SERIALIZER);\n"
        + "    this.postRestRequestDataTypeBooleanRestEndpoint.setDeserializer(POST_REST_REQUEST_DATA_TYPE_BOOLEAN_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.postRestRequestNoParametersRestEndpoint = createRestEndpoint(POST_REST_REQUEST_NO_PARAMETERS_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.postRestRequestNoParametersRestEndpoint.setHttpMethod(HttpMethod.POST);\n"
        + "    this.postRestRequestNoParametersRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/postNoParameter\"));\n"
        + "    this.postRestRequestNoParametersRestEndpoint.setUrlParamsSerializer(HttpRequestUrlParamsSerializer.noParams());\n"
        + "    this.postRestRequestNoParametersRestEndpoint.setSerializer(null);\n"
        + "    this.postRestRequestNoParametersRestEndpoint.setDeserializer(POST_REST_REQUEST_NO_PARAMETERS_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.postRestRequestDataTypeObjectOneParameterRestEndpoint = createRestEndpoint(POST_REST_REQUEST_DATA_TYPE_OBJECT_ONE_PARAMETER_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.postRestRequestDataTypeObjectOneParameterRestEndpoint.setHttpMethod(HttpMethod.POST);\n"
        + "    this.postRestRequestDataTypeObjectOneParameterRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/postObjectOneParameter\"));\n"
        + "    this.postRestRequestDataTypeObjectOneParameterRestEndpoint.setUrlParamsSerializer(POST_REST_REQUEST_DATA_TYPE_OBJECT_ONE_PARAMETER_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.postRestRequestDataTypeObjectOneParameterRestEndpoint.setSerializer(POST_REST_REQUEST_DATA_TYPE_OBJECT_ONE_PARAMETER_REST_API_REQUEST_SERIALIZER);\n"
        + "    this.postRestRequestDataTypeObjectOneParameterRestEndpoint.setDeserializer(POST_REST_REQUEST_DATA_TYPE_OBJECT_ONE_PARAMETER_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.postRestRequestDataTypeIntListWithDefaultValueRestEndpoint = createRestEndpoint(POST_REST_REQUEST_DATA_TYPE_INT_LIST_WITH_DEFAULT_VALUE_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.postRestRequestDataTypeIntListWithDefaultValueRestEndpoint.setHttpMethod(HttpMethod.POST);\n"
        + "    this.postRestRequestDataTypeIntListWithDefaultValueRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/postIntList\"));\n"
        + "    this.postRestRequestDataTypeIntListWithDefaultValueRestEndpoint.setUrlParamsSerializer(POST_REST_REQUEST_DATA_TYPE_INT_LIST_WITH_DEFAULT_VALUE_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.postRestRequestDataTypeIntListWithDefaultValueRestEndpoint.setSerializer(POST_REST_REQUEST_DATA_TYPE_INT_LIST_WITH_DEFAULT_VALUE_REST_API_REQUEST_SERIALIZER);\n"
        + "    this.postRestRequestDataTypeIntListWithDefaultValueRestEndpoint.setDeserializer(POST_REST_REQUEST_DATA_TYPE_INT_LIST_WITH_DEFAULT_VALUE_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.postRestRequestDataTypeObjectListMapRestEndpoint = createRestEndpoint(POST_REST_REQUEST_DATA_TYPE_OBJECT_LIST_MAP_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.postRestRequestDataTypeObjectListMapRestEndpoint.setHttpMethod(HttpMethod.POST);\n"
        + "    this.postRestRequestDataTypeObjectListMapRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/postObjectListMap\"));\n"
        + "    this.postRestRequestDataTypeObjectListMapRestEndpoint.setUrlParamsSerializer(POST_REST_REQUEST_DATA_TYPE_OBJECT_LIST_MAP_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.postRestRequestDataTypeObjectListMapRestEndpoint.setSerializer(POST_REST_REQUEST_DATA_TYPE_OBJECT_LIST_MAP_REST_API_REQUEST_SERIALIZER);\n"
        + "    this.postRestRequestDataTypeObjectListMapRestEndpoint.setDeserializer(POST_REST_REQUEST_DATA_TYPE_OBJECT_LIST_MAP_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.deletetRestRequestDataTypeObjectAsBodyRestEndpoint = createRestEndpoint(DELETET_REST_REQUEST_DATA_TYPE_OBJECT_AS_BODY_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.deletetRestRequestDataTypeObjectAsBodyRestEndpoint.setHttpMethod(HttpMethod.DELETE);\n"
        + "    this.deletetRestRequestDataTypeObjectAsBodyRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/deletetRestRequestDataTypeObjectAsBody\"));\n"
        + "    this.deletetRestRequestDataTypeObjectAsBodyRestEndpoint.setUrlParamsSerializer(DELETET_REST_REQUEST_DATA_TYPE_OBJECT_AS_BODY_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.deletetRestRequestDataTypeObjectAsBodyRestEndpoint.setSerializer(DELETET_REST_REQUEST_DATA_TYPE_OBJECT_AS_BODY_REST_API_REQUEST_SERIALIZER);\n"
        + "    this.deletetRestRequestDataTypeObjectAsBodyRestEndpoint.setDeserializer(DELETET_REST_REQUEST_DATA_TYPE_OBJECT_AS_BODY_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.deletetRestRequestDataTypeObjectAsQueryParamsRestEndpoint = createRestEndpoint(DELETET_REST_REQUEST_DATA_TYPE_OBJECT_AS_QUERY_PARAMS_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.deletetRestRequestDataTypeObjectAsQueryParamsRestEndpoint.setHttpMethod(HttpMethod.DELETE);\n"
        + "    this.deletetRestRequestDataTypeObjectAsQueryParamsRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/deletetRestRequestDataTypeObjectAsQueryParams\"));\n"
        + "    this.deletetRestRequestDataTypeObjectAsQueryParamsRestEndpoint.setUrlParamsSerializer(DELETET_REST_REQUEST_DATA_TYPE_OBJECT_AS_QUERY_PARAMS_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.deletetRestRequestDataTypeObjectAsQueryParamsRestEndpoint.setDeserializer(DELETET_REST_REQUEST_DATA_TYPE_OBJECT_AS_QUERY_PARAMS_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.getRestRequestDataTypeObjectListMapRestEndpoint = createRestEndpoint(GET_REST_REQUEST_DATA_TYPE_OBJECT_LIST_MAP_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.getRestRequestDataTypeObjectListMapRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.getRestRequestDataTypeObjectListMapRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/getObjectListMap\"));\n"
        + "    this.getRestRequestDataTypeObjectListMapRestEndpoint.setUrlParamsSerializer(GET_REST_REQUEST_DATA_TYPE_OBJECT_LIST_MAP_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.getRestRequestDataTypeObjectListMapRestEndpoint.setDeserializer(GET_REST_REQUEST_DATA_TYPE_OBJECT_LIST_MAP_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.getRestRequestDataTypeEmptyObjectRestEndpoint = createRestEndpoint(GET_REST_REQUEST_DATA_TYPE_EMPTY_OBJECT_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.getRestRequestDataTypeEmptyObjectRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.getRestRequestDataTypeEmptyObjectRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/getEmptyObject\"));\n"
        + "    this.getRestRequestDataTypeEmptyObjectRestEndpoint.setUrlParamsSerializer(HttpRequestUrlParamsSerializer.noParams());\n"
        + "    this.getRestRequestDataTypeEmptyObjectRestEndpoint.setDeserializer(GET_REST_REQUEST_DATA_TYPE_EMPTY_OBJECT_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.getRestRequestDataTypeExternalObjectRestEndpoint = createRestEndpoint(GET_REST_REQUEST_DATA_TYPE_EXTERNAL_OBJECT_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.getRestRequestDataTypeExternalObjectRestEndpoint.setHttpMethod(HttpMethod.POST);\n"
        + "    this.getRestRequestDataTypeExternalObjectRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/postEmptyObject\"));\n"
        + "    this.getRestRequestDataTypeExternalObjectRestEndpoint.setUrlParamsSerializer(GET_REST_REQUEST_DATA_TYPE_EXTERNAL_OBJECT_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.getRestRequestDataTypeExternalObjectRestEndpoint.setSerializer(GET_REST_REQUEST_DATA_TYPE_EXTERNAL_OBJECT_REST_API_REQUEST_SERIALIZER);\n"
        + "    this.getRestRequestDataTypeExternalObjectRestEndpoint.setDeserializer(GET_REST_REQUEST_DATA_TYPE_EXTERNAL_OBJECT_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.postRestRequestDataTypeRawObjectRestEndpoint = createRestEndpoint(POST_REST_REQUEST_DATA_TYPE_RAW_OBJECT_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.postRestRequestDataTypeRawObjectRestEndpoint.setHttpMethod(HttpMethod.POST);\n"
        + "    this.postRestRequestDataTypeRawObjectRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/postEmptyObject\"));\n"
        + "    this.postRestRequestDataTypeRawObjectRestEndpoint.setUrlParamsSerializer(POST_REST_REQUEST_DATA_TYPE_RAW_OBJECT_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.postRestRequestDataTypeRawObjectRestEndpoint.setSerializer(POST_REST_REQUEST_DATA_TYPE_RAW_OBJECT_REST_API_REQUEST_SERIALIZER);\n"
        + "    this.postRestRequestDataTypeRawObjectRestEndpoint.setDeserializer(POST_REST_REQUEST_DATA_TYPE_RAW_OBJECT_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.getRestRequestDataTypePrimitiveWithMsgFieldRestEndpoint = createRestEndpoint(GET_REST_REQUEST_DATA_TYPE_PRIMITIVE_WITH_MSG_FIELD_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.getRestRequestDataTypePrimitiveWithMsgFieldRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.getRestRequestDataTypePrimitiveWithMsgFieldRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/getIntWithMsgField\"));\n"
        + "    this.getRestRequestDataTypePrimitiveWithMsgFieldRestEndpoint.setUrlParamsSerializer(GET_REST_REQUEST_DATA_TYPE_PRIMITIVE_WITH_MSG_FIELD_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.getRestRequestDataTypePrimitiveWithMsgFieldRestEndpoint.setDeserializer(GET_REST_REQUEST_DATA_TYPE_PRIMITIVE_WITH_MSG_FIELD_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.getRestRequestDataTypePrimitiveWithMsgFieldAsPathPAramRestEndpoint = createRestEndpoint(GET_REST_REQUEST_DATA_TYPE_PRIMITIVE_WITH_MSG_FIELD_AS_PATH_P_ARAM_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.getRestRequestDataTypePrimitiveWithMsgFieldAsPathPAramRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.getRestRequestDataTypePrimitiveWithMsgFieldAsPathPAramRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/getIntWithMsgFieldAsPathParam\"));\n"
        + "    this.getRestRequestDataTypePrimitiveWithMsgFieldAsPathPAramRestEndpoint.setUrlParamsSerializer(GET_REST_REQUEST_DATA_TYPE_PRIMITIVE_WITH_MSG_FIELD_AS_PATH_P_ARAM_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.getRestRequestDataTypePrimitiveWithMsgFieldAsPathPAramRestEndpoint.setDeserializer(GET_REST_REQUEST_DATA_TYPE_PRIMITIVE_WITH_MSG_FIELD_AS_PATH_P_ARAM_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.getRestRequestDataTypeWithBothPathAndQueryParamsRestEndpoint = createRestEndpoint(GET_REST_REQUEST_DATA_TYPE_WITH_BOTH_PATH_AND_QUERY_PARAMS_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.getRestRequestDataTypeWithBothPathAndQueryParamsRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.getRestRequestDataTypeWithBothPathAndQueryParamsRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/getRestRequestDataTypeWithBothPathAndQueryParams\"));\n"
        + "    this.getRestRequestDataTypeWithBothPathAndQueryParamsRestEndpoint.setUrlParamsSerializer(GET_REST_REQUEST_DATA_TYPE_WITH_BOTH_PATH_AND_QUERY_PARAMS_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.getRestRequestDataTypeWithBothPathAndQueryParamsRestEndpoint.setDeserializer(GET_REST_REQUEST_DATA_TYPE_WITH_BOTH_PATH_AND_QUERY_PARAMS_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.streamWithObjectRequestDataTypeZeroParametersWsEndpoint = createWebsocketEndpoint(STREAM_WITH_OBJECT_REQUEST_DATA_TYPE_ZERO_PARAMETERS_WS_API, MyTestExchangeExchange.WS_DEFAULT_WEBSOCKET_CLIENT, STREAM_WITH_OBJECT_REQUEST_DATA_TYPE_ZERO_PARAMETERS_WS_API_MESSAGE_DESERIALIZER);\n"
        + "    this.streamWithObjectRequestDataTypeOneParameterWsEndpoint = createWebsocketEndpoint(STREAM_WITH_OBJECT_REQUEST_DATA_TYPE_ONE_PARAMETER_WS_API, MyTestExchangeExchange.WS_DEFAULT_WEBSOCKET_CLIENT, STREAM_WITH_OBJECT_REQUEST_DATA_TYPE_ONE_PARAMETER_WS_API_MESSAGE_DESERIALIZER);\n"
        + "    this.streamWithIntRequestDataTypeWsEndpoint = createWebsocketEndpoint(STREAM_WITH_INT_REQUEST_DATA_TYPE_WS_API, MyTestExchangeExchange.WS_DEFAULT_WEBSOCKET_CLIENT, STREAM_WITH_INT_REQUEST_DATA_TYPE_WS_API_MESSAGE_DESERIALIZER);\n"
        + "    this.streamWithLongRequestDataTypeWsEndpoint = createWebsocketEndpoint(STREAM_WITH_LONG_REQUEST_DATA_TYPE_WS_API, MyTestExchangeExchange.WS_DEFAULT_WEBSOCKET_CLIENT, STREAM_WITH_LONG_REQUEST_DATA_TYPE_WS_API_MESSAGE_DESERIALIZER);\n"
        + "    this.streamWithBigDecimalRequestDataTypeWsEndpoint = createWebsocketEndpoint(STREAM_WITH_BIG_DECIMAL_REQUEST_DATA_TYPE_WS_API, MyTestExchangeExchange.WS_DEFAULT_WEBSOCKET_CLIENT, STREAM_WITH_BIG_DECIMAL_REQUEST_DATA_TYPE_WS_API_MESSAGE_DESERIALIZER);\n"
        + "    this.streamWithStringRequestDataTypeWsEndpoint = createWebsocketEndpoint(STREAM_WITH_STRING_REQUEST_DATA_TYPE_WS_API, MyTestExchangeExchange.WS_DEFAULT_WEBSOCKET_CLIENT, STREAM_WITH_STRING_REQUEST_DATA_TYPE_WS_API_MESSAGE_DESERIALIZER);\n"
        + "    this.streamWithBooleanRequestDataTypeWsEndpoint = createWebsocketEndpoint(STREAM_WITH_BOOLEAN_REQUEST_DATA_TYPE_WS_API, MyTestExchangeExchange.WS_DEFAULT_WEBSOCKET_CLIENT, STREAM_WITH_BOOLEAN_REQUEST_DATA_TYPE_WS_API_MESSAGE_DESERIALIZER);\n"
        + "    this.streamWithStringListRequestDataTypeWsEndpoint = createWebsocketEndpoint(STREAM_WITH_STRING_LIST_REQUEST_DATA_TYPE_WS_API, MyTestExchangeExchange.WS_DEFAULT_WEBSOCKET_CLIENT, STREAM_WITH_STRING_LIST_REQUEST_DATA_TYPE_WS_API_MESSAGE_DESERIALIZER);\n"
        + "    this.streamWithObjectListMapRequestDataTypeWsEndpoint = createWebsocketEndpoint(STREAM_WITH_OBJECT_LIST_MAP_REQUEST_DATA_TYPE_WS_API, MyTestExchangeExchange.WS_DEFAULT_WEBSOCKET_CLIENT, STREAM_WITH_OBJECT_LIST_MAP_REQUEST_DATA_TYPE_WS_API_MESSAGE_DESERIALIZER);\n"
        + "    this.streamWithNullTopicAndNullRequestWsEndpoint = createWebsocketEndpoint(STREAM_WITH_NULL_TOPIC_AND_NULL_REQUEST_WS_API, MyTestExchangeExchange.WS_DEFAULT_WEBSOCKET_CLIENT, STREAM_WITH_NULL_TOPIC_AND_NULL_REQUEST_WS_API_MESSAGE_DESERIALIZER);\n"
        + "    this.streamWithNullTopicAndPrimitiveTypeRequestWsEndpoint = createWebsocketEndpoint(STREAM_WITH_NULL_TOPIC_AND_PRIMITIVE_TYPE_REQUEST_WS_API, MyTestExchangeExchange.WS_DEFAULT_WEBSOCKET_CLIENT, STREAM_WITH_NULL_TOPIC_AND_PRIMITIVE_TYPE_REQUEST_WS_API_MESSAGE_DESERIALIZER);\n"
        + "  }\n"
        + "  \n"
        + "  // REST endpoint method call implementations\n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> postRestRequestDataTypeInt(Integer request) {\n"
        + "    return postRestRequestDataTypeIntRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> postRestRequestDataTypeLong(Long request) {\n"
        + "    return postRestRequestDataTypeLongRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> postRestRequestDataTypeBigDecimal(BigDecimal request) {\n"
        + "    return postRestRequestDataTypeBigDecimalRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> postRestRequestDataTypeStringImplicit(String request) {\n"
        + "    return postRestRequestDataTypeStringImplicitRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> postRestRequestDataTypeIntImplicitAsPathParam(Integer request) {\n"
        + "    return postRestRequestDataTypeIntImplicitAsPathParamRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> postRestRequestDataTypeBoolean(Boolean request) {\n"
        + "    return postRestRequestDataTypeBooleanRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> postRestRequestNoParameters(String request) {\n"
        + "    return postRestRequestNoParametersRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> postRestRequestDataTypeObjectOneParameter(MyTestExchangeMarketDataPostRestRequestDataTypeObjectOneParameterRequest request) {\n"
        + "    return postRestRequestDataTypeObjectOneParameterRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> postRestRequestDataTypeIntListWithDefaultValue(List<Integer> request) {\n"
        + "    request = Optional.ofNullable(request).orElse(POST_REST_REQUEST_DATA_TYPE_INT_LIST_WITH_DEFAULT_VALUE_REST_REQUEST_DEFAULT_VALUE)\n"
        + "    return postRestRequestDataTypeIntListWithDefaultValueRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> postRestRequestDataTypeObjectListMap(Map<String, List<SingleSymbol>> request) {\n"
        + "    return postRestRequestDataTypeObjectListMapRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> deletetRestRequestDataTypeObjectAsBody(Map<String, List<SingleSymbol>> request) {\n"
        + "    return deletetRestRequestDataTypeObjectAsBodyRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> deletetRestRequestDataTypeObjectAsQueryParams(Map<String, List<SingleSymbol>> request) {\n"
        + "    return deletetRestRequestDataTypeObjectAsQueryParamsRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> getRestRequestDataTypeObjectListMap(Map<String, List<MultiSymbol>> request) {\n"
        + "    return getRestRequestDataTypeObjectListMapRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> getRestRequestDataTypeEmptyObject() {\n"
        + "    return getRestRequestDataTypeEmptyObjectRestEndpoint.submit(null);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> getRestRequestDataTypeExternalObject(ExternalObject request) {\n"
        + "    return getRestRequestDataTypeExternalObjectRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> postRestRequestDataTypeRawObject(Object request) {\n"
        + "    return postRestRequestDataTypeRawObjectRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> getRestRequestDataTypePrimitiveWithMsgField(Integer request) {\n"
        + "    return getRestRequestDataTypePrimitiveWithMsgFieldRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> getRestRequestDataTypePrimitiveWithMsgFieldAsPathPAram(Integer request) {\n"
        + "    return getRestRequestDataTypePrimitiveWithMsgFieldAsPathPAramRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> getRestRequestDataTypeWithBothPathAndQueryParams(MyTestExchangeMarketDataGetRestRequestDataTypeWithBothPathAndQueryParamsRequest request) {\n"
        + "    return getRestRequestDataTypeWithBothPathAndQueryParamsRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  \n"
        + "  // Websocket endpoint subscribe/unsubscribe methods implementations\n"
        + "  @Override\n"
        + "  public String subscribeStreamWithObjectRequestDataTypeZeroParameters(WebsocketListener<Ticker> listener) {\n"
        + "    String topic = \"ticker\";\n"
        + "    WebsocketMessageTopicMatcherFactory topicMatcherFactory = WSMTMFUtil.value(\"t\", EncodingUtil.substituteArguments(\"${topic}\", \"topic\", topic));\n"
        + "    WebsocketSubscribeRequest subscribeRequest = WebsocketSubscribeRequest.create(null, topic, topicMatcherFactory);\n"
        + "    return streamWithObjectRequestDataTypeZeroParametersWsEndpoint.subscribe(subscribeRequest, listener);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public boolean unsubscribeStreamWithObjectRequestDataTypeZeroParameters(String subscriptionId) {\n"
        + "    return streamWithObjectRequestDataTypeZeroParametersWsEndpoint.unsubscribe(subscriptionId);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public String subscribeStreamWithObjectRequestDataTypeOneParameter(SingleSymbol request, WebsocketListener<Ticker> listener) {\n"
        + "    String topic = \"ticker\";\n"
        + "    WebsocketMessageTopicMatcherFactory topicMatcherFactory = WSMTMFUtil.value(\"t\", EncodingUtil.substituteArguments(\"${topic}\", \"topic\", topic));\n"
        + "    WebsocketSubscribeRequest subscribeRequest = WebsocketSubscribeRequest.create(request, topic, topicMatcherFactory);\n"
        + "    return streamWithObjectRequestDataTypeOneParameterWsEndpoint.subscribe(subscribeRequest, listener);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public boolean unsubscribeStreamWithObjectRequestDataTypeOneParameter(String subscriptionId) {\n"
        + "    return streamWithObjectRequestDataTypeOneParameterWsEndpoint.unsubscribe(subscriptionId);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public String subscribeStreamWithIntRequestDataType(Integer request, WebsocketListener<Ticker> listener) {\n"
        + "    String topic = \"ticker\";\n"
        + "    WebsocketMessageTopicMatcherFactory topicMatcherFactory = WSMTMFUtil.value(\"t\", \"streamWithIntRequestDataTypeTopic\");\n"
        + "    WebsocketSubscribeRequest subscribeRequest = WebsocketSubscribeRequest.create(request, topic, topicMatcherFactory);\n"
        + "    return streamWithIntRequestDataTypeWsEndpoint.subscribe(subscribeRequest, listener);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public boolean unsubscribeStreamWithIntRequestDataType(String subscriptionId) {\n"
        + "    return streamWithIntRequestDataTypeWsEndpoint.unsubscribe(subscriptionId);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public String subscribeStreamWithLongRequestDataType(Long request, WebsocketListener<Ticker> listener) {\n"
        + "    request = Optional.ofNullable(request).orElse(STREAM_WITH_LONG_REQUEST_DATA_TYPE_WS_REQUEST_DEFAULT_VALUE)\n"
        + "    String topic = \"ticker\";\n"
        + "    WebsocketMessageTopicMatcherFactory topicMatcherFactory = WSMTMFUtil.value(\"t\", \"streamWithLongRequestDataTypeTopic\");\n"
        + "    WebsocketSubscribeRequest subscribeRequest = WebsocketSubscribeRequest.create(request, topic, topicMatcherFactory);\n"
        + "    return streamWithLongRequestDataTypeWsEndpoint.subscribe(subscribeRequest, listener);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public boolean unsubscribeStreamWithLongRequestDataType(String subscriptionId) {\n"
        + "    return streamWithLongRequestDataTypeWsEndpoint.unsubscribe(subscriptionId);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public String subscribeStreamWithBigDecimalRequestDataType(BigDecimal request, WebsocketListener<Ticker> listener) {\n"
        + "    String topic = \"ticker\";\n"
        + "    WebsocketMessageTopicMatcherFactory topicMatcherFactory = WSMTMFUtil.value(\"t\", \"streamWithBigDecimalRequestDataTypeTopic\");\n"
        + "    WebsocketSubscribeRequest subscribeRequest = WebsocketSubscribeRequest.create(request, topic, topicMatcherFactory);\n"
        + "    return streamWithBigDecimalRequestDataTypeWsEndpoint.subscribe(subscribeRequest, listener);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public boolean unsubscribeStreamWithBigDecimalRequestDataType(String subscriptionId) {\n"
        + "    return streamWithBigDecimalRequestDataTypeWsEndpoint.unsubscribe(subscriptionId);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public String subscribeStreamWithStringRequestDataType(String request, WebsocketListener<Ticker> listener) {\n"
        + "    String topic = \"ticker\";\n"
        + "    WebsocketMessageTopicMatcherFactory topicMatcherFactory = WSMTMFUtil.value(\"t\", \"streamWithStringRequestDataTypeTopic\");\n"
        + "    WebsocketSubscribeRequest subscribeRequest = WebsocketSubscribeRequest.create(request, topic, topicMatcherFactory);\n"
        + "    return streamWithStringRequestDataTypeWsEndpoint.subscribe(subscribeRequest, listener);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public boolean unsubscribeStreamWithStringRequestDataType(String subscriptionId) {\n"
        + "    return streamWithStringRequestDataTypeWsEndpoint.unsubscribe(subscriptionId);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public String subscribeStreamWithBooleanRequestDataType(Boolean request, WebsocketListener<Ticker> listener) {\n"
        + "    String topic = \"ticker\";\n"
        + "    WebsocketMessageTopicMatcherFactory topicMatcherFactory = WSMTMFUtil.value(\"t\", \"streamWithBooleanRequestDataTypeTopic\");\n"
        + "    WebsocketSubscribeRequest subscribeRequest = WebsocketSubscribeRequest.create(request, topic, topicMatcherFactory);\n"
        + "    return streamWithBooleanRequestDataTypeWsEndpoint.subscribe(subscribeRequest, listener);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public boolean unsubscribeStreamWithBooleanRequestDataType(String subscriptionId) {\n"
        + "    return streamWithBooleanRequestDataTypeWsEndpoint.unsubscribe(subscriptionId);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public String subscribeStreamWithStringListRequestDataType(List<String> request, WebsocketListener<Ticker> listener) {\n"
        + "    String topic = \"ticker\";\n"
        + "    WebsocketMessageTopicMatcherFactory topicMatcherFactory = WSMTMFUtil.value(\"t\", \"streamWithBooleanRequestDataTypeTopic\");\n"
        + "    WebsocketSubscribeRequest subscribeRequest = WebsocketSubscribeRequest.create(request, topic, topicMatcherFactory);\n"
        + "    return streamWithStringListRequestDataTypeWsEndpoint.subscribe(subscribeRequest, listener);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public boolean unsubscribeStreamWithStringListRequestDataType(String subscriptionId) {\n"
        + "    return streamWithStringListRequestDataTypeWsEndpoint.unsubscribe(subscriptionId);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public String subscribeStreamWithObjectListMapRequestDataType(Map<String, List<MultiSymbol>> request, WebsocketListener<Ticker> listener) {\n"
        + "    String topic = EncodingUtil.substituteArguments(\"ticker:${request.symbolList}\", \"request.symbolList\", JsonUtil.pojoToJsonString(request.getSymbolList()));\n"
        + "    WebsocketMessageTopicMatcherFactory topicMatcherFactory = WSMTMFUtil.value(\"t\", \"streamWithObjectListMapRequestDataTypeTopic\");\n"
        + "    WebsocketSubscribeRequest subscribeRequest = WebsocketSubscribeRequest.create(request, topic, topicMatcherFactory);\n"
        + "    return streamWithObjectListMapRequestDataTypeWsEndpoint.subscribe(subscribeRequest, listener);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public boolean unsubscribeStreamWithObjectListMapRequestDataType(String subscriptionId) {\n"
        + "    return streamWithObjectListMapRequestDataTypeWsEndpoint.unsubscribe(subscriptionId);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public String subscribeStreamWithNullTopicAndNullRequest(WebsocketListener<Ticker> listener) {\n"
        + "    String topic = \"streamWithNullTopicAndNullRequest\";\n"
        + "    WebsocketMessageTopicMatcherFactory topicMatcherFactory = WebsocketMessageTopicMatcherFactory.ANY_MATCHER_FACTORY;\n"
        + "    WebsocketSubscribeRequest subscribeRequest = WebsocketSubscribeRequest.create(null, topic, topicMatcherFactory);\n"
        + "    return streamWithNullTopicAndNullRequestWsEndpoint.subscribe(subscribeRequest, listener);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public boolean unsubscribeStreamWithNullTopicAndNullRequest(String subscriptionId) {\n"
        + "    return streamWithNullTopicAndNullRequestWsEndpoint.unsubscribe(subscriptionId);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public String subscribeStreamWithNullTopicAndPrimitiveTypeRequest(String request, WebsocketListener<Ticker> listener) {\n"
        + "    String topic = \"streamWithNullTopicAndPrimitiveTypeRequest\";\n"
        + "    WebsocketMessageTopicMatcherFactory topicMatcherFactory = WSMTMFUtil.value(\"t\", EncodingUtil.substituteArguments(\"ticker:${request}\", \"request\", request));\n"
        + "    WebsocketSubscribeRequest subscribeRequest = WebsocketSubscribeRequest.create(request, topic, topicMatcherFactory);\n"
        + "    return streamWithNullTopicAndPrimitiveTypeRequestWsEndpoint.subscribe(subscribeRequest, listener);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public boolean unsubscribeStreamWithNullTopicAndPrimitiveTypeRequest(String subscriptionId) {\n"
        + "    return streamWithNullTopicAndPrimitiveTypeRequestWsEndpoint.unsubscribe(subscriptionId);\n"
        + "  }\n"
        + "  \n"
        + "}\n"
        + "",
      apiInterfaceGenerator.generate());
  }
  
  @Test
  public void testGenerateExchangeApiDifferentRestEndpointQueryParamsDefinitions() throws Exception {
    ExchangeDescriptor exchangeDescriptor = ExchangeDescriptorParser.fromJson(Paths.get(".", "src", "test", "resources", "testExchangeDescriptorAllUrlQueryParamsDefinitions.json"));
    ExchangeApiDescriptor exchangeApiDescriptor = exchangeDescriptor.getApis().get(0);
    ExchangeApiInterfaceImplementationGenerator apiInterfaceGenerator = new ExchangeApiInterfaceImplementationGenerator(exchangeDescriptor, exchangeApiDescriptor, PlaceHolderResolver.NO_OP);
    Assert.assertEquals("package com.foo.bar.gen.restapi;\n"
        + "\n"
        + "import java.util.List;\n"
        + "\n"
        + "import com.foo.bar.gen.MyTestExchangeWithDifferentUrlQueryParamsExchange;\n"
        + "import com.foo.bar.gen.restapi.pojo.GenericResponse;\n"
        + "import com.foo.bar.gen.restapi.pojo.Person;\n"
        + "import com.foo.bar.gen.restapi.pojo.PersonFilter;\n"
        + "import com.foo.bar.gen.restapi.pojo.deserializers.GenericResponseDeserializer;\n"
        + "import com.foo.bar.gen.restapi.pojo.serializers.PersonSerializer;\n"
        + "import javax.annotation.processing.Generated;\n"
        + "import org.jxapi.exchange.AbstractExchangeApi;\n"
        + "import org.jxapi.exchange.ExchangeObserver;\n"
        + "import org.jxapi.netutils.deserialization.MessageDeserializer;\n"
        + "import org.jxapi.netutils.deserialization.json.field.ListJsonFieldDeserializer;\n"
        + "import org.jxapi.netutils.rest.FutureRestResponse;\n"
        + "import org.jxapi.netutils.rest.HttpMethod;\n"
        + "import org.jxapi.netutils.rest.HttpRequestUrlParamsSerializer;\n"
        + "import org.jxapi.netutils.rest.RestEndpoint;\n"
        + "import org.jxapi.netutils.serialization.MessageSerializer;\n"
        + "import org.jxapi.netutils.serialization.json.IntegerJsonValueSerializer;\n"
        + "import org.jxapi.netutils.serialization.json.ListJsonValueSerializer;\n"
        + "import org.jxapi.util.EncodingUtil;\n"
        + "import org.jxapi.util.JsonUtil;\n"
        + "\n"
        + "/**\n"
        + " * Actual implementation of {@link MyTestExchangeWithDifferentUrlQueryParamsRestApiApi}<br>\n"
        + " */\n"
        + "@Generated(\"org.jxapi.generator.java.exchange.api.ExchangeApiInterfaceImplementationGenerator\")\n"
        + "public class MyTestExchangeWithDifferentUrlQueryParamsRestApiApiImpl extends AbstractExchangeApi implements MyTestExchangeWithDifferentUrlQueryParamsRestApiApi {\n"
        + "  \n"
        + "  // REST endpoints URL parameter serializers\n"
        + "  private static final HttpRequestUrlParamsSerializer<Integer> GET_REST_REQUEST_DATA_TYPE_INT_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"id\", request)).toString();\n"
        + "  private static final HttpRequestUrlParamsSerializer<PersonFilter> GET_REST_REQUEST_DATA_TYPE_OBJECT_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"age\", request.getAge(), \"city\", request.getCity())).toString();\n"
        + "  private static final HttpRequestUrlParamsSerializer<List<String>> GET_REST_REQUEST_DATA_TYPE_STRING_LIST_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"ids\", JsonUtil.pojoToJsonString(request))).toString();\n"
        + "  private static final HttpRequestUrlParamsSerializer<Integer> DELETE_REST_REQUEST_DATA_TYPE_INT_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"id\", request)).toString();\n"
        + "  private static final HttpRequestUrlParamsSerializer<Integer> DELETE_REST_REQUEST_DATA_TYPE_INT_AS_QUERY_PARAM_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"id\", request)).toString();\n"
        + "  private static final HttpRequestUrlParamsSerializer<PersonFilter> DELETE_REST_REQUEST_DATA_TYPE_OBJECT_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"age\", request.getAge(), \"city\", request.getCity())).toString();\n"
        + "  private static final HttpRequestUrlParamsSerializer<Person> PUT_REST_REQUEST_DATA_TYPE_OBJECT_REST_API_URL_PARAMS_SERIALIZER = HttpRequestUrlParamsSerializer.noParams();\n"
        + "  private static final HttpRequestUrlParamsSerializer<Person> PUT_REST_REQUEST_DATA_TYPE_OBJECT_REST_API_URL_PARAMS_SERIALIZER = HttpRequestUrlParamsSerializer.noParams();\n"
        + "  private static final HttpRequestUrlParamsSerializer<Person> PUT_REST_REQUEST_DATA_TYPE_OBJECT_USING_DEFAULT_QUERY_PARAMS_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"request\", JsonUtil.pojoToJsonString(request))).toString();\n"
        + "  private static final HttpRequestUrlParamsSerializer<List<Integer>> POST_REST_REQUEST_DATA_TYPE_INT_LIST_AS_QUERY_PARAM_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"intListArg\", JsonUtil.pojoToJsonString(request))).toString();\n"
        + "  private static final HttpRequestUrlParamsSerializer<String> GET_REST_REQUEST_DATA_TYPE_STRING_IMPLICIT_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"id\", request)).toString();\n"
        + "  \n"
        + "  // Request serializers\n"
        + "  private static final MessageSerializer<Person> PUT_REST_REQUEST_DATA_TYPE_OBJECT_REST_API_REQUEST_SERIALIZER = new PersonSerializer();\n"
        + "  private static final MessageSerializer<Person> PUT_REST_REQUEST_DATA_TYPE_OBJECT_REST_API_REQUEST_SERIALIZER = new PersonSerializer();\n"
        + "  private static final MessageSerializer<Person> PUT_REST_REQUEST_DATA_TYPE_OBJECT_USING_DEFAULT_QUERY_PARAMS_REST_API_REQUEST_SERIALIZER = new PersonSerializer();\n"
        + "  private static final MessageSerializer<List<Integer>> POST_REST_REQUEST_DATA_TYPE_INT_LIST_AS_QUERY_PARAM_REST_API_REQUEST_SERIALIZER = new ListJsonValueSerializer<>(IntegerJsonValueSerializer.getInstance());\n"
        + "  \n"
        + "  // Message deserializers\n"
        + "  private static final MessageDeserializer<GenericResponse> GET_REST_REQUEST_DATA_TYPE_INT_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> GET_REST_REQUEST_DATA_TYPE_OBJECT_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<List<GenericResponse>> GET_REST_REQUEST_DATA_TYPE_STRING_LIST_REST_API_RESPONSE_DESERIALIZER = new ListJsonFieldDeserializer<>(new GenericResponseDeserializer());\n"
        + "  private static final MessageDeserializer<GenericResponse> DELETE_REST_REQUEST_DATA_TYPE_INT_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> DELETE_REST_REQUEST_DATA_TYPE_INT_AS_QUERY_PARAM_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> DELETE_REST_REQUEST_DATA_TYPE_OBJECT_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> PUT_REST_REQUEST_DATA_TYPE_OBJECT_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> PUT_REST_REQUEST_DATA_TYPE_OBJECT_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> PUT_REST_REQUEST_DATA_TYPE_OBJECT_USING_DEFAULT_QUERY_PARAMS_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> POST_REST_REQUEST_DATA_TYPE_INT_LIST_AS_QUERY_PARAM_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  private static final MessageDeserializer<GenericResponse> GET_REST_REQUEST_DATA_TYPE_STRING_IMPLICIT_REST_API_RESPONSE_DESERIALIZER = new GenericResponseDeserializer();\n"
        + "  \n"
        + "  // REST endpoints\n"
        + "  private final RestEndpoint<Integer, GenericResponse> getRestRequestDataTypeIntRestEndpoint;\n"
        + "  private final RestEndpoint<PersonFilter, GenericResponse> getRestRequestDataTypeObjectRestEndpoint;\n"
        + "  private final RestEndpoint<List<String>, List<GenericResponse>> getRestRequestDataTypeStringListRestEndpoint;\n"
        + "  private final RestEndpoint<Integer, GenericResponse> deleteRestRequestDataTypeIntRestEndpoint;\n"
        + "  private final RestEndpoint<Integer, GenericResponse> deleteRestRequestDataTypeIntAsQueryParamRestEndpoint;\n"
        + "  private final RestEndpoint<PersonFilter, GenericResponse> deleteRestRequestDataTypeObjectRestEndpoint;\n"
        + "  private final RestEndpoint<Person, GenericResponse> putRestRequestDataTypeObjectRestEndpoint;\n"
        + "  private final RestEndpoint<Person, GenericResponse> putRestRequestDataTypeObjectRestEndpoint;\n"
        + "  private final RestEndpoint<Person, GenericResponse> putRestRequestDataTypeObjectUsingDefaultQueryParamsRestEndpoint;\n"
        + "  private final RestEndpoint<List<Integer>, GenericResponse> postRestRequestDataTypeIntListAsQueryParamRestEndpoint;\n"
        + "  private final RestEndpoint<String, GenericResponse> getRestRequestDataTypeStringImplicitRestEndpoint;\n"
        + "  \n"
        + "  // Constructor\n"
        + "  /**\n"
        + "   * Constructor\n"
        + "   * \n"
        + "   * @param exchange the exchange instance\n"
        + "   * @param exchangeObserver the exchange API observer to dispatch endpoint events to\n"
        + "   * \n"
        + "   */\n"
        + "  public MyTestExchangeWithDifferentUrlQueryParamsRestApiApiImpl(MyTestExchangeWithDifferentUrlQueryParamsExchange exchange, ExchangeObserver exchangeObserver) {\n"
        + "    super(ID,\n"
        + "          exchange,\n"
        + "          exchangeObserver,\n"
        + "          null);\n"
        + "    this.getRestRequestDataTypeIntRestEndpoint = createRestEndpoint(GET_REST_REQUEST_DATA_TYPE_INT_REST_API, MyTestExchangeWithDifferentUrlQueryParamsExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.getRestRequestDataTypeIntRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.getRestRequestDataTypeIntRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/getRestRequestDataTypeInt\"));\n"
        + "    this.getRestRequestDataTypeIntRestEndpoint.setUrlParamsSerializer(GET_REST_REQUEST_DATA_TYPE_INT_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.getRestRequestDataTypeIntRestEndpoint.setDeserializer(GET_REST_REQUEST_DATA_TYPE_INT_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.getRestRequestDataTypeObjectRestEndpoint = createRestEndpoint(GET_REST_REQUEST_DATA_TYPE_OBJECT_REST_API, MyTestExchangeWithDifferentUrlQueryParamsExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.getRestRequestDataTypeObjectRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.getRestRequestDataTypeObjectRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/getRestRequestDataTypeObject\"));\n"
        + "    this.getRestRequestDataTypeObjectRestEndpoint.setUrlParamsSerializer(GET_REST_REQUEST_DATA_TYPE_OBJECT_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.getRestRequestDataTypeObjectRestEndpoint.setDeserializer(GET_REST_REQUEST_DATA_TYPE_OBJECT_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.getRestRequestDataTypeStringListRestEndpoint = createRestEndpoint(GET_REST_REQUEST_DATA_TYPE_STRING_LIST_REST_API, MyTestExchangeWithDifferentUrlQueryParamsExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.getRestRequestDataTypeStringListRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.getRestRequestDataTypeStringListRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/getRestRequestDataTypeStringList\"));\n"
        + "    this.getRestRequestDataTypeStringListRestEndpoint.setUrlParamsSerializer(GET_REST_REQUEST_DATA_TYPE_STRING_LIST_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.getRestRequestDataTypeStringListRestEndpoint.setDeserializer(GET_REST_REQUEST_DATA_TYPE_STRING_LIST_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.deleteRestRequestDataTypeIntRestEndpoint = createRestEndpoint(DELETE_REST_REQUEST_DATA_TYPE_INT_REST_API, MyTestExchangeWithDifferentUrlQueryParamsExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.deleteRestRequestDataTypeIntRestEndpoint.setHttpMethod(HttpMethod.DELETE);\n"
        + "    this.deleteRestRequestDataTypeIntRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/deleteRestRequestDataTypeInt\"));\n"
        + "    this.deleteRestRequestDataTypeIntRestEndpoint.setUrlParamsSerializer(DELETE_REST_REQUEST_DATA_TYPE_INT_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.deleteRestRequestDataTypeIntRestEndpoint.setDeserializer(DELETE_REST_REQUEST_DATA_TYPE_INT_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.deleteRestRequestDataTypeIntAsQueryParamRestEndpoint = createRestEndpoint(DELETE_REST_REQUEST_DATA_TYPE_INT_AS_QUERY_PARAM_REST_API, MyTestExchangeWithDifferentUrlQueryParamsExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.deleteRestRequestDataTypeIntAsQueryParamRestEndpoint.setHttpMethod(HttpMethod.DELETE);\n"
        + "    this.deleteRestRequestDataTypeIntAsQueryParamRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/deleteRestRequestDataTypeIntAsQueryParam\"));\n"
        + "    this.deleteRestRequestDataTypeIntAsQueryParamRestEndpoint.setUrlParamsSerializer(DELETE_REST_REQUEST_DATA_TYPE_INT_AS_QUERY_PARAM_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.deleteRestRequestDataTypeIntAsQueryParamRestEndpoint.setDeserializer(DELETE_REST_REQUEST_DATA_TYPE_INT_AS_QUERY_PARAM_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.deleteRestRequestDataTypeObjectRestEndpoint = createRestEndpoint(DELETE_REST_REQUEST_DATA_TYPE_OBJECT_REST_API, MyTestExchangeWithDifferentUrlQueryParamsExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.deleteRestRequestDataTypeObjectRestEndpoint.setHttpMethod(HttpMethod.DELETE);\n"
        + "    this.deleteRestRequestDataTypeObjectRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/deleteRestRequestDataTypeObject\"));\n"
        + "    this.deleteRestRequestDataTypeObjectRestEndpoint.setUrlParamsSerializer(DELETE_REST_REQUEST_DATA_TYPE_OBJECT_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.deleteRestRequestDataTypeObjectRestEndpoint.setDeserializer(DELETE_REST_REQUEST_DATA_TYPE_OBJECT_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.putRestRequestDataTypeObjectRestEndpoint = createRestEndpoint(PUT_REST_REQUEST_DATA_TYPE_OBJECT_REST_API, MyTestExchangeWithDifferentUrlQueryParamsExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.putRestRequestDataTypeObjectRestEndpoint.setHttpMethod(HttpMethod.PUT);\n"
        + "    this.putRestRequestDataTypeObjectRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/putRestRequestDataTypeObject\"));\n"
        + "    this.putRestRequestDataTypeObjectRestEndpoint.setUrlParamsSerializer(PUT_REST_REQUEST_DATA_TYPE_OBJECT_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.putRestRequestDataTypeObjectRestEndpoint.setSerializer(PUT_REST_REQUEST_DATA_TYPE_OBJECT_REST_API_REQUEST_SERIALIZER);\n"
        + "    this.putRestRequestDataTypeObjectRestEndpoint.setDeserializer(PUT_REST_REQUEST_DATA_TYPE_OBJECT_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.putRestRequestDataTypeObjectRestEndpoint = createRestEndpoint(PUT_REST_REQUEST_DATA_TYPE_OBJECT_REST_API, MyTestExchangeWithDifferentUrlQueryParamsExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.putRestRequestDataTypeObjectRestEndpoint.setHttpMethod(HttpMethod.PUT);\n"
        + "    this.putRestRequestDataTypeObjectRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/putRestRequestDataTypeObject\"));\n"
        + "    this.putRestRequestDataTypeObjectRestEndpoint.setUrlParamsSerializer(PUT_REST_REQUEST_DATA_TYPE_OBJECT_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.putRestRequestDataTypeObjectRestEndpoint.setSerializer(PUT_REST_REQUEST_DATA_TYPE_OBJECT_REST_API_REQUEST_SERIALIZER);\n"
        + "    this.putRestRequestDataTypeObjectRestEndpoint.setDeserializer(PUT_REST_REQUEST_DATA_TYPE_OBJECT_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.putRestRequestDataTypeObjectUsingDefaultQueryParamsRestEndpoint = createRestEndpoint(PUT_REST_REQUEST_DATA_TYPE_OBJECT_USING_DEFAULT_QUERY_PARAMS_REST_API, MyTestExchangeWithDifferentUrlQueryParamsExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.putRestRequestDataTypeObjectUsingDefaultQueryParamsRestEndpoint.setHttpMethod(HttpMethod.PUT);\n"
        + "    this.putRestRequestDataTypeObjectUsingDefaultQueryParamsRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/putRestRequestDataTypeObjectUsingDefaultQueryParams\"));\n"
        + "    this.putRestRequestDataTypeObjectUsingDefaultQueryParamsRestEndpoint.setUrlParamsSerializer(PUT_REST_REQUEST_DATA_TYPE_OBJECT_USING_DEFAULT_QUERY_PARAMS_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.putRestRequestDataTypeObjectUsingDefaultQueryParamsRestEndpoint.setSerializer(PUT_REST_REQUEST_DATA_TYPE_OBJECT_USING_DEFAULT_QUERY_PARAMS_REST_API_REQUEST_SERIALIZER);\n"
        + "    this.putRestRequestDataTypeObjectUsingDefaultQueryParamsRestEndpoint.setDeserializer(PUT_REST_REQUEST_DATA_TYPE_OBJECT_USING_DEFAULT_QUERY_PARAMS_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.postRestRequestDataTypeIntListAsQueryParamRestEndpoint = createRestEndpoint(POST_REST_REQUEST_DATA_TYPE_INT_LIST_AS_QUERY_PARAM_REST_API, MyTestExchangeWithDifferentUrlQueryParamsExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.postRestRequestDataTypeIntListAsQueryParamRestEndpoint.setHttpMethod(HttpMethod.POST);\n"
        + "    this.postRestRequestDataTypeIntListAsQueryParamRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/postRestRequestDataTypeIntListAsQueryParam\"));\n"
        + "    this.postRestRequestDataTypeIntListAsQueryParamRestEndpoint.setUrlParamsSerializer(POST_REST_REQUEST_DATA_TYPE_INT_LIST_AS_QUERY_PARAM_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.postRestRequestDataTypeIntListAsQueryParamRestEndpoint.setSerializer(POST_REST_REQUEST_DATA_TYPE_INT_LIST_AS_QUERY_PARAM_REST_API_REQUEST_SERIALIZER);\n"
        + "    this.postRestRequestDataTypeIntListAsQueryParamRestEndpoint.setDeserializer(POST_REST_REQUEST_DATA_TYPE_INT_LIST_AS_QUERY_PARAM_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.getRestRequestDataTypeStringImplicitRestEndpoint = createRestEndpoint(GET_REST_REQUEST_DATA_TYPE_STRING_IMPLICIT_REST_API, MyTestExchangeWithDifferentUrlQueryParamsExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.getRestRequestDataTypeStringImplicitRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.getRestRequestDataTypeStringImplicitRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/getRestRequestDataTypeInt\"));\n"
        + "    this.getRestRequestDataTypeStringImplicitRestEndpoint.setUrlParamsSerializer(GET_REST_REQUEST_DATA_TYPE_STRING_IMPLICIT_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.getRestRequestDataTypeStringImplicitRestEndpoint.setDeserializer(GET_REST_REQUEST_DATA_TYPE_STRING_IMPLICIT_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "  }\n"
        + "  \n"
        + "  // REST endpoint method call implementations\n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> getRestRequestDataTypeInt(Integer request) {\n"
        + "    return getRestRequestDataTypeIntRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> getRestRequestDataTypeObject(PersonFilter request) {\n"
        + "    return getRestRequestDataTypeObjectRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<List<GenericResponse>> getRestRequestDataTypeStringList(List<String> request) {\n"
        + "    return getRestRequestDataTypeStringListRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> deleteRestRequestDataTypeInt(Integer request) {\n"
        + "    return deleteRestRequestDataTypeIntRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> deleteRestRequestDataTypeIntAsQueryParam(Integer request) {\n"
        + "    return deleteRestRequestDataTypeIntAsQueryParamRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> deleteRestRequestDataTypeObject(PersonFilter request) {\n"
        + "    return deleteRestRequestDataTypeObjectRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> putRestRequestDataTypeObject(Person request) {\n"
        + "    return putRestRequestDataTypeObjectRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> putRestRequestDataTypeObjectUsingDefaultQueryParams(Person request) {\n"
        + "    return putRestRequestDataTypeObjectUsingDefaultQueryParamsRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> postRestRequestDataTypeIntListAsQueryParam(List<Integer> request) {\n"
        + "    return postRestRequestDataTypeIntListAsQueryParamRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<GenericResponse> getRestRequestDataTypeStringImplicit(String request) {\n"
        + "    return getRestRequestDataTypeStringImplicitRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "}\n"
        + "",
        apiInterfaceGenerator.generate());
  }
  
  @Test
  public void testGenerateExchangeApiPropertiesInheritedFromExchange() throws Exception {
    ExchangeDescriptor exchangeDescriptor = ExchangeDescriptorParser.fromJson(Paths.get(".", "src", "test", "resources", "exchangeApiInterfaceImplementationGeneratorTestDescriptorPropertiesInheritedFromExchange.json"));
    ExchangeApiDescriptor exchangeApiDescriptor = exchangeDescriptor.getApis().get(0);
    ExchangeApiInterfaceImplementationGenerator apiInterfaceGenerator = new ExchangeApiInterfaceImplementationGenerator(exchangeDescriptor, exchangeApiDescriptor, PlaceHolderResolver.NO_OP);
    Assert.assertEquals("package com.foo.bar.gen.futurestrading;\n"
        + "\n"
        + "import java.util.List;\n"
        + "\n"
        + "import com.foo.bar.gen.MyTestExchangeExchange;\n"
        + "import com.foo.bar.gen.futurestrading.pojo.MyTestExchangeFuturesTradingExchangeInfoRequest;\n"
        + "import com.foo.bar.gen.futurestrading.pojo.MyTestExchangeFuturesTradingExchangeInfoResponse;\n"
        + "import com.foo.bar.gen.futurestrading.pojo.MyTestExchangeFuturesTradingTickerStreamMessage;\n"
        + "import com.foo.bar.gen.futurestrading.pojo.MyTestExchangeFuturesTradingTickerStreamRequest;\n"
        + "import com.foo.bar.gen.futurestrading.pojo.deserializers.MyTestExchangeFuturesTradingExchangeInfoResponseDeserializer;\n"
        + "import com.foo.bar.gen.futurestrading.pojo.deserializers.MyTestExchangeFuturesTradingTickerStreamMessageDeserializer;\n"
        + "import javax.annotation.processing.Generated;\n"
        + "import org.jxapi.exchange.AbstractExchangeApi;\n"
        + "import org.jxapi.exchange.ExchangeObserver;\n"
        + "import org.jxapi.netutils.deserialization.MessageDeserializer;\n"
        + "import org.jxapi.netutils.rest.FutureRestResponse;\n"
        + "import org.jxapi.netutils.rest.HttpMethod;\n"
        + "import org.jxapi.netutils.rest.HttpRequestUrlParamsSerializer;\n"
        + "import org.jxapi.netutils.rest.RestEndpoint;\n"
        + "import org.jxapi.netutils.websocket.WebsocketEndpoint;\n"
        + "import org.jxapi.netutils.websocket.WebsocketListener;\n"
        + "import org.jxapi.netutils.websocket.WebsocketSubscribeRequest;\n"
        + "import org.jxapi.netutils.websocket.multiplexing.WSMTMFUtil;\n"
        + "import org.jxapi.netutils.websocket.multiplexing.WebsocketMessageTopicMatcherFactory;\n"
        + "import org.jxapi.util.EncodingUtil;\n"
        + "import org.jxapi.util.JsonUtil;\n"
        + "\n"
        + "/**\n"
        + " * Actual implementation of {@link MyTestExchangeFuturesTradingApi}<br>\n"
        + " */\n"
        + "@Generated(\"org.jxapi.generator.java.exchange.api.ExchangeApiInterfaceImplementationGenerator\")\n"
        + "public class MyTestExchangeFuturesTradingApiImpl extends AbstractExchangeApi implements MyTestExchangeFuturesTradingApi {\n"
        + "  \n"
        + "  // REST endpoints URL parameter serializers\n"
        + "  private static final HttpRequestUrlParamsSerializer<MyTestExchangeFuturesTradingExchangeInfoRequest> EXCHANGE_INFO_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"symbols\", JsonUtil.pojoToJsonString(request.getSymbols()))).toString();\n"
        + "  \n"
        + "  // Message deserializers\n"
        + "  private static final MessageDeserializer<MyTestExchangeFuturesTradingExchangeInfoResponse> EXCHANGE_INFO_REST_API_RESPONSE_DESERIALIZER = new MyTestExchangeFuturesTradingExchangeInfoResponseDeserializer();\n"
        + "  private static final MessageDeserializer<MyTestExchangeFuturesTradingTickerStreamMessage> TICKER_STREAM_WS_API_MESSAGE_DESERIALIZER = new MyTestExchangeFuturesTradingTickerStreamMessageDeserializer();\n"
        + "  \n"
        + "  // REST endpoints\n"
        + "  private final RestEndpoint<MyTestExchangeFuturesTradingExchangeInfoRequest, MyTestExchangeFuturesTradingExchangeInfoResponse> exchangeInfoRestEndpoint;\n"
        + "  \n"
        + "  // Websocket endpoints\n"
        + "  private final WebsocketEndpoint<MyTestExchangeFuturesTradingTickerStreamMessage> tickerStreamWsEndpoint;\n"
        + "  \n"
        + "  // Constructor\n"
        + "  /**\n"
        + "   * Constructor\n"
        + "   * \n"
        + "   * @param exchange the exchange instance\n"
        + "   * @param exchangeObserver the exchange API observer to dispatch endpoint events to\n"
        + "   * \n"
        + "   */\n"
        + "  public MyTestExchangeFuturesTradingApiImpl(MyTestExchangeExchange exchange, ExchangeObserver exchangeObserver) {\n"
        + "    super(ID,\n"
        + "          exchange,\n"
        + "          exchangeObserver,\n"
        + "          null);\n"
        + "    this.exchangeInfoRestEndpoint = createRestEndpoint(EXCHANGE_INFO_REST_API, MyTestExchangeExchange.FUTURES_TRADING_HTTP_CLIENT);\n"
        + "    this.exchangeInfoRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.exchangeInfoRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"https://com.sample.mycex/exchangeInfo\"));\n"
        + "    this.exchangeInfoRestEndpoint.setUrlParamsSerializer(EXCHANGE_INFO_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.exchangeInfoRestEndpoint.setDeserializer(EXCHANGE_INFO_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    this.exchangeInfoRestEndpoint.setRateLimitRules(List.of(exchange.getGlobalWeightRuleRateLimit(), exchange.getGlobalRateRuleRateLimit()));\n"
        + "    this.exchangeInfoRestEndpoint.setWeight(60);\n"
        + "    \n"
        + "    this.tickerStreamWsEndpoint = createWebsocketEndpoint(TICKER_STREAM_WS_API, MyTestExchangeExchange.WS_DEFAULT_WEBSOCKET_CLIENT, TICKER_STREAM_WS_API_MESSAGE_DESERIALIZER);\n"
        + "  }\n"
        + "  \n"
        + "  // REST endpoint method call implementations\n"
        + "  @Override\n"
        + "  public FutureRestResponse<MyTestExchangeFuturesTradingExchangeInfoResponse> exchangeInfo(MyTestExchangeFuturesTradingExchangeInfoRequest request) {\n"
        + "    return exchangeInfoRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  \n"
        + "  // Websocket endpoint subscribe/unsubscribe methods implementations\n"
        + "  @Override\n"
        + "  public String subscribeTickerStream(MyTestExchangeFuturesTradingTickerStreamRequest request, WebsocketListener<MyTestExchangeFuturesTradingTickerStreamMessage> listener) {\n"
        + "    String topic = EncodingUtil.substituteArguments(\"${request.symbol}@ticker\", \"request.symbol\", request.getSymbol());\n"
        + "    WebsocketMessageTopicMatcherFactory topicMatcherFactory = WSMTMFUtil.and(List.of(\n"
        + "      WSMTMFUtil.value(\"t\", \"ticker\"),\n"
        + "      WSMTMFUtil.value(\"s\", EncodingUtil.substituteArguments(\"${request.symbol}\", \"request.symbol\", request.getSymbol()))));\n"
        + "    WebsocketSubscribeRequest subscribeRequest = WebsocketSubscribeRequest.create(request, topic, topicMatcherFactory);\n"
        + "    return tickerStreamWsEndpoint.subscribe(subscribeRequest, listener);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public boolean unsubscribeTickerStream(String subscriptionId) {\n"
        + "    return tickerStreamWsEndpoint.unsubscribe(subscriptionId);\n"
        + "  }\n"
        + "  \n"
        + "}\n"
        + "",
      apiInterfaceGenerator.generate());
  }
  
  @Test
  public void testGenerateTestExchangeMarketDataApi() throws Exception {
    ExchangeDescriptor exchangeDescriptor = ExchangeDescriptorParser.fromJson(Paths.get(".", "src", "test", "resources", "testExchangeDescriptor.json"));
    ExchangeApiDescriptor exchangeApiDescriptor = exchangeDescriptor.getApis().get(0);
    ExchangeApiInterfaceImplementationGenerator apiInterfaceGenerator = new ExchangeApiInterfaceImplementationGenerator(exchangeDescriptor, exchangeApiDescriptor, PlaceHolderResolver.NO_OP);
    Assert.assertEquals("package com.foo.bar.gen.marketdata;\n"
        + "\n"
        + "import java.util.List;\n"
        + "\n"
        + "import com.foo.bar.gen.MyTestExchangeExchange;\n"
        + "import com.foo.bar.gen.marketdata.pojo.MyTestExchangeMarketDataExchangeInfoRequest;\n"
        + "import com.foo.bar.gen.marketdata.pojo.MyTestExchangeMarketDataExchangeInfoResponse;\n"
        + "import com.foo.bar.gen.marketdata.pojo.MyTestExchangeMarketDataTickerStreamMessage;\n"
        + "import com.foo.bar.gen.marketdata.pojo.MyTestExchangeMarketDataTickerStreamRequest;\n"
        + "import com.foo.bar.gen.marketdata.pojo.MyTestExchangeMarketDataTickersResponse;\n"
        + "import com.foo.bar.gen.marketdata.pojo.deserializers.MyTestExchangeMarketDataExchangeInfoResponseDeserializer;\n"
        + "import com.foo.bar.gen.marketdata.pojo.deserializers.MyTestExchangeMarketDataTickerStreamMessageDeserializer;\n"
        + "import com.foo.bar.gen.marketdata.pojo.deserializers.MyTestExchangeMarketDataTickersResponseDeserializer;\n"
        + "import javax.annotation.processing.Generated;\n"
        + "import org.jxapi.exchange.AbstractExchangeApi;\n"
        + "import org.jxapi.exchange.ExchangeObserver;\n"
        + "import org.jxapi.netutils.deserialization.MessageDeserializer;\n"
        + "import org.jxapi.netutils.rest.FutureRestResponse;\n"
        + "import org.jxapi.netutils.rest.HttpMethod;\n"
        + "import org.jxapi.netutils.rest.HttpRequestUrlParamsSerializer;\n"
        + "import org.jxapi.netutils.rest.RestEndpoint;\n"
        + "import org.jxapi.netutils.websocket.WebsocketEndpoint;\n"
        + "import org.jxapi.netutils.websocket.WebsocketListener;\n"
        + "import org.jxapi.netutils.websocket.WebsocketSubscribeRequest;\n"
        + "import org.jxapi.netutils.websocket.multiplexing.WSMTMFUtil;\n"
        + "import org.jxapi.netutils.websocket.multiplexing.WebsocketMessageTopicMatcherFactory;\n"
        + "import org.jxapi.util.EncodingUtil;\n"
        + "import org.jxapi.util.JsonUtil;\n"
        + "\n"
        + "/**\n"
        + " * Actual implementation of {@link MyTestExchangeMarketDataApi}<br>\n"
        + " */\n"
        + "@Generated(\"org.jxapi.generator.java.exchange.api.ExchangeApiInterfaceImplementationGenerator\")\n"
        + "public class MyTestExchangeMarketDataApiImpl extends AbstractExchangeApi implements MyTestExchangeMarketDataApi {\n"
        + "  \n"
        + "  // REST endpoints URL parameter serializers\n"
        + "  private static final HttpRequestUrlParamsSerializer<MyTestExchangeMarketDataExchangeInfoRequest> EXCHANGE_INFO_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"symbols\", JsonUtil.pojoToJsonString(request.getSymbols()), \"apiKey\", request.getApiKey(), \"author\", request.getAuthor(), \"page\", request.getPage())).toString();\n"
        + "  \n"
        + "  // Message deserializers\n"
        + "  private static final MessageDeserializer<MyTestExchangeMarketDataExchangeInfoResponse> EXCHANGE_INFO_REST_API_RESPONSE_DESERIALIZER = new MyTestExchangeMarketDataExchangeInfoResponseDeserializer();\n"
        + "  private static final MessageDeserializer<MyTestExchangeMarketDataTickersResponse> TICKERS_REST_API_RESPONSE_DESERIALIZER = new MyTestExchangeMarketDataTickersResponseDeserializer();\n"
        + "  private static final MessageDeserializer<MyTestExchangeMarketDataTickerStreamMessage> TICKER_STREAM_WS_API_MESSAGE_DESERIALIZER = new MyTestExchangeMarketDataTickerStreamMessageDeserializer();\n"
        + "  \n"
        + "  // REST endpoints\n"
        + "  private final RestEndpoint<MyTestExchangeMarketDataExchangeInfoRequest, MyTestExchangeMarketDataExchangeInfoResponse> exchangeInfoRestEndpoint;\n"
        + "  private final RestEndpoint<Void, MyTestExchangeMarketDataTickersResponse> tickersRestEndpoint;\n"
        + "  \n"
        + "  // Websocket endpoints\n"
        + "  private final WebsocketEndpoint<MyTestExchangeMarketDataTickerStreamMessage> tickerStreamWsEndpoint;\n"
        + "  \n"
        + "  // Constructor\n"
        + "  /**\n"
        + "   * Constructor\n"
        + "   * \n"
        + "   * @param exchange the exchange instance\n"
        + "   * @param exchangeObserver the exchange API observer to dispatch endpoint events to\n"
        + "   * \n"
        + "   */\n"
        + "  public MyTestExchangeMarketDataApiImpl(MyTestExchangeExchange exchange, ExchangeObserver exchangeObserver) {\n"
        + "    super(ID,\n"
        + "          exchange,\n"
        + "          exchangeObserver,\n"
        + "          null);\n"
        + "    this.exchangeInfoRestEndpoint = createPaginatedRestEndpoint(EXCHANGE_INFO_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.exchangeInfoRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.exchangeInfoRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"https://com.sample.mycex/exchangeInfo\"));\n"
        + "    this.exchangeInfoRestEndpoint.setUrlParamsSerializer(EXCHANGE_INFO_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.exchangeInfoRestEndpoint.setDeserializer(EXCHANGE_INFO_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.tickersRestEndpoint = createRestEndpoint(TICKERS_REST_API, MyTestExchangeExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.tickersRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.tickersRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"https://com.sample.mycex/tickers\"));\n"
        + "    this.tickersRestEndpoint.setUrlParamsSerializer(HttpRequestUrlParamsSerializer.noParams());\n"
        + "    this.tickersRestEndpoint.setDeserializer(TICKERS_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.tickerStreamWsEndpoint = createWebsocketEndpoint(TICKER_STREAM_WS_API, MyTestExchangeExchange.WS_DEFAULT_WEBSOCKET_CLIENT, TICKER_STREAM_WS_API_MESSAGE_DESERIALIZER);\n"
        + "  }\n"
        + "  \n"
        + "  // REST endpoint method call implementations\n"
        + "  @Override\n"
        + "  public FutureRestResponse<MyTestExchangeMarketDataExchangeInfoResponse> exchangeInfo(MyTestExchangeMarketDataExchangeInfoRequest request) {\n"
        + "    return exchangeInfoRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<MyTestExchangeMarketDataTickersResponse> tickers() {\n"
        + "    return tickersRestEndpoint.submit(null);\n"
        + "  }\n"
        + "  \n"
        + "  \n"
        + "  // Websocket endpoint subscribe/unsubscribe methods implementations\n"
        + "  @Override\n"
        + "  public String subscribeTickerStream(MyTestExchangeMarketDataTickerStreamRequest request, WebsocketListener<MyTestExchangeMarketDataTickerStreamMessage> listener) {\n"
        + "    String topic = EncodingUtil.substituteArguments(\"${request.symbol}@ticker\", \"request.symbol\", request.getSymbol());\n"
        + "    WebsocketMessageTopicMatcherFactory topicMatcherFactory = WSMTMFUtil.or(List.of(\n"
        + "      WSMTMFUtil.value(\"t\", \"ticker\"),\n"
        + "      WSMTMFUtil.value(\"s\", EncodingUtil.substituteArguments(\"${request.symbol}\", \"request.symbol\", request.getSymbol()))));\n"
        + "    WebsocketSubscribeRequest subscribeRequest = WebsocketSubscribeRequest.create(request, topic, topicMatcherFactory);\n"
        + "    return tickerStreamWsEndpoint.subscribe(subscribeRequest, listener);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public boolean unsubscribeTickerStream(String subscriptionId) {\n"
        + "    return tickerStreamWsEndpoint.unsubscribe(subscriptionId);\n"
        + "  }\n"
        + "  \n"
        + "}\n"
        + "",
        apiInterfaceGenerator.generate());
  }
  
  @Test
  public void testGenerateConflictExchangeV1Api() throws Exception {
    ExchangeDescriptor exchangeDescriptor = ExchangeDescriptorParser.fromYaml(Paths.get(".", "src", "test", "resources", "exchangeWithEndpointWithConflictingPropertyNames.yaml"));
    ExchangeApiDescriptor exchangeApiDescriptor = exchangeDescriptor.getApis().get(0);
    ExchangeApiInterfaceImplementationGenerator apiInterfaceGenerator = new ExchangeApiInterfaceImplementationGenerator(exchangeDescriptor, exchangeApiDescriptor, PlaceHolderResolver.NO_OP);
    Assert.assertEquals("package org.jxapi.exchanges.conflict.gen.v1;\n"
        + "\n"
        + "import java.util.List;\n"
        + "import java.util.Map;\n"
        + "import java.util.Optional;\n"
        + "\n"
        + "import javax.annotation.processing.Generated;\n"
        + "import org.jxapi.exchange.AbstractExchangeApi;\n"
        + "import org.jxapi.exchange.ExchangeObserver;\n"
        + "import org.jxapi.exchanges.conflict.gen.ConflictConstants;\n"
        + "import org.jxapi.exchanges.conflict.gen.ConflictExchange;\n"
        + "import org.jxapi.exchanges.conflict.gen.ConflictProperties;\n"
        + "import org.jxapi.exchanges.conflict.gen.v1.pojo.ConflictRequest;\n"
        + "import org.jxapi.exchanges.conflict.gen.v1.pojo.ConflictV1MyWsEndpointMessage;\n"
        + "import org.jxapi.exchanges.conflict.gen.v1.pojo.deserializers.ConflictV1MyWsEndpointMessageDeserializer;\n"
        + "import org.jxapi.netutils.deserialization.MessageDeserializer;\n"
        + "import org.jxapi.netutils.deserialization.json.field.ListJsonFieldDeserializer;\n"
        + "import org.jxapi.netutils.deserialization.json.field.LongJsonFieldDeserializer;\n"
        + "import org.jxapi.netutils.deserialization.json.field.MapJsonFieldDeserializer;\n"
        + "import org.jxapi.netutils.deserialization.json.field.StringJsonFieldDeserializer;\n"
        + "import org.jxapi.netutils.rest.FutureRestResponse;\n"
        + "import org.jxapi.netutils.rest.HttpMethod;\n"
        + "import org.jxapi.netutils.rest.HttpRequestUrlParamsSerializer;\n"
        + "import org.jxapi.netutils.rest.RestEndpoint;\n"
        + "import org.jxapi.netutils.websocket.WebsocketEndpoint;\n"
        + "import org.jxapi.netutils.websocket.WebsocketListener;\n"
        + "import org.jxapi.netutils.websocket.WebsocketSubscribeRequest;\n"
        + "import org.jxapi.netutils.websocket.multiplexing.WSMTMFUtil;\n"
        + "import org.jxapi.netutils.websocket.multiplexing.WebsocketMessageTopicMatcherFactory;\n"
        + "import org.jxapi.util.EncodingUtil;\n"
        + "import org.jxapi.util.JsonUtil;\n"
        + "\n"
        + "/**\n"
        + " * Actual implementation of {@link ConflictV1Api}<br>\n"
        + " */\n"
        + "@Generated(\"org.jxapi.generator.java.exchange.api.ExchangeApiInterfaceImplementationGenerator\")\n"
        + "public class ConflictV1ApiImpl extends AbstractExchangeApi implements ConflictV1Api {\n"
        + "  \n"
        + "  // REST endpoint request default values\n"
        + "  \n"
        + "  /**\n"
        + "   * Default value for <code>aRestRequest</code>\n"
        + "   */\n"
        + "  public static final Map<String, Long> A_REST_REQUEST_DEFAULT_VALUE = new MapJsonFieldDeserializer<>(LongJsonFieldDeserializer.getInstance()).deserialize(EncodingUtil.substituteArguments(\"{\\\"bar\\\":20000,\\\"foo\\\":\\\"${constants.c1_}\\\"}\", \"constants.c1_\", ConflictConstants.C1__));\n"
        + "  \n"
        + "  /**\n"
        + "   * Default value for <code>ARestRequest</code>\n"
        + "   */\n"
        + "  public static final List<String> A_REST_REQUEST_DEFAULT_VALUE_ = new ListJsonFieldDeserializer<>(StringJsonFieldDeserializer.getInstance()).deserialize(EncodingUtil.substituteArguments(\"[\\\"${constants.C1_.foo}\\\",\\\"${constants.C1_.bar}\\\"]\", \"constants.C1_.foo\", ConflictConstants.C1___.FOO, \"constants.C1_.bar\", ConflictConstants.C1___.BAR));\n"
        + "  \n"
        + "  // Websocket endpoint request default values\n"
        + "  \n"
        + "  /**\n"
        + "   * Default value for <code>aWsRequest</code>\n"
        + "   */\n"
        + "  public static final Integer A_WS_REQUEST_DEFAULT_VALUE = Integer.valueOf(EncodingUtil.substituteArguments(\"${constants.c1}\", \"constants.c1\", ConflictConstants.C1));\n"
        + "  \n"
        + "  /**\n"
        + "   * Default value for <code>AWsRequest</code>\n"
        + "   */\n"
        + "  public static final String A_WS_REQUEST_DEFAULT_VALUE_ = EncodingUtil.substituteArguments(\"${constants.C1}\", \"constants.C1\", ConflictConstants.C1_);\n"
        + "  \n"
        + "  // REST endpoints URL parameter serializers\n"
        + "  private static final HttpRequestUrlParamsSerializer<ConflictRequest> MY_REST_ENDPOINT_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"p1\", request.getp1(), \"P1\", request.getP1(), \"p1_\", request.getp1_(), \"subParam\", request.getP1_().getSubParam())).toString();\n"
        + "  private static final HttpRequestUrlParamsSerializer<Map<String, Long>> A_REST_API_URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"request\", JsonUtil.pojoToJsonString(request))).toString();\n"
        + "  private static final HttpRequestUrlParamsSerializer<List<String>> A_REST_API__URL_PARAMS_SERIALIZER = (request, url) -> new StringBuilder(128).append(url)\n"
        + "    .append(EncodingUtil.createUrlQueryParameters(\"request\", JsonUtil.pojoToJsonString(request))).toString();\n"
        + "  \n"
        + "  // Message deserializers\n"
        + "  private static final MessageDeserializer<String> MY_REST_ENDPOINT_REST_API_RESPONSE_DESERIALIZER = MessageDeserializer.NO_OP;\n"
        + "  private static final MessageDeserializer<String> A_REST_API_RESPONSE_DESERIALIZER = StringJsonFieldDeserializer.getInstance();\n"
        + "  private static final MessageDeserializer<String> A_REST_API__RESPONSE_DESERIALIZER = StringJsonFieldDeserializer.getInstance();\n"
        + "  private static final MessageDeserializer<ConflictV1MyWsEndpointMessage> MY_WS_ENDPOINT_WS_API_MESSAGE_DESERIALIZER = new ConflictV1MyWsEndpointMessageDeserializer();\n"
        + "  private static final MessageDeserializer<String> A_WS_API_MESSAGE_DESERIALIZER = StringJsonFieldDeserializer.getInstance();\n"
        + "  private static final MessageDeserializer<String> A_WS_API__MESSAGE_DESERIALIZER = StringJsonFieldDeserializer.getInstance();\n"
        + "  \n"
        + "  // REST endpoints\n"
        + "  private final RestEndpoint<ConflictRequest, String> myRestEndpointRestEndpoint;\n"
        + "  private final RestEndpoint<Map<String, Long>, String> aRestEndpoint;\n"
        + "  private final RestEndpoint<List<String>, String> ARestEndpoint;\n"
        + "  \n"
        + "  // Websocket endpoints\n"
        + "  private final WebsocketEndpoint<ConflictV1MyWsEndpointMessage> myWsEndpointWsEndpoint;\n"
        + "  private final WebsocketEndpoint<String> aWsEndpoint;\n"
        + "  private final WebsocketEndpoint<String> AWsEndpoint;\n"
        + "  \n"
        + "  // Constructor\n"
        + "  /**\n"
        + "   * Constructor\n"
        + "   * \n"
        + "   * @param exchange the exchange instance\n"
        + "   * @param exchangeObserver the exchange API observer to dispatch endpoint events to\n"
        + "   * \n"
        + "   */\n"
        + "  public ConflictV1ApiImpl(ConflictExchange exchange, ExchangeObserver exchangeObserver) {\n"
        + "    super(ID,\n"
        + "          exchange,\n"
        + "          exchangeObserver,\n"
        + "          \"v1\");\n"
        + "    this.myRestEndpointRestEndpoint = createRestEndpoint(MY_REST_ENDPOINT_REST_API, ConflictExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.myRestEndpointRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.myRestEndpointRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/myApi\"));\n"
        + "    this.myRestEndpointRestEndpoint.setUrlParamsSerializer(MY_REST_ENDPOINT_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.myRestEndpointRestEndpoint.setDeserializer(MY_REST_ENDPOINT_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.aRestEndpoint = createRestEndpoint(A_REST_API, ConflictExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.aRestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.aRestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/myApi\"));\n"
        + "    this.aRestEndpoint.setUrlParamsSerializer(A_REST_API_URL_PARAMS_SERIALIZER);\n"
        + "    this.aRestEndpoint.setDeserializer(A_REST_API_RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.ARestEndpoint = createRestEndpoint(A_REST_API_, ConflictExchange.HTTP_DEFAULT_HTTP_CLIENT);\n"
        + "    this.ARestEndpoint.setHttpMethod(HttpMethod.GET);\n"
        + "    this.ARestEndpoint.setUrl(EncodingUtil.buildUrl(this.httpUrl, \"/myApi\"));\n"
        + "    this.ARestEndpoint.setUrlParamsSerializer(A_REST_API__URL_PARAMS_SERIALIZER);\n"
        + "    this.ARestEndpoint.setDeserializer(A_REST_API__RESPONSE_DESERIALIZER);\n"
        + "    \n"
        + "    this.myWsEndpointWsEndpoint = createWebsocketEndpoint(MY_WS_ENDPOINT_WS_API, ConflictExchange.WS_DEFAULT_WEBSOCKET_CLIENT, MY_WS_ENDPOINT_WS_API_MESSAGE_DESERIALIZER);\n"
        + "    this.aWsEndpoint = createWebsocketEndpoint(A_WS_API, ConflictExchange.WS_DEFAULT_WEBSOCKET_CLIENT, A_WS_API_MESSAGE_DESERIALIZER);\n"
        + "    this.AWsEndpoint = createWebsocketEndpoint(A_WS_API_, ConflictExchange.WS_DEFAULT_WEBSOCKET_CLIENT, A_WS_API__MESSAGE_DESERIALIZER);\n"
        + "  }\n"
        + "  \n"
        + "  // REST endpoint method call implementations\n"
        + "  @Override\n"
        + "  public FutureRestResponse<String> myRestEndpoint(ConflictRequest request) {\n"
        + "    return myRestEndpointRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<String> a(Map<String, Long> request) {\n"
        + "    request = Optional.ofNullable(request).orElse(A_REST_REQUEST_DEFAULT_VALUE)\n"
        + "    return aRestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public FutureRestResponse<String> A(List<String> request) {\n"
        + "    request = Optional.ofNullable(request).orElse(A_REST_REQUEST_DEFAULT_VALUE_)\n"
        + "    return ARestEndpoint.submit(request);\n"
        + "  }\n"
        + "  \n"
        + "  \n"
        + "  // Websocket endpoint subscribe/unsubscribe methods implementations\n"
        + "  @Override\n"
        + "  public String subscribeMyWsEndpoint(ConflictRequest request, WebsocketListener<ConflictV1MyWsEndpointMessage> listener) {\n"
        + "    String topic = \"myWsEndpoint\";\n"
        + "    WebsocketMessageTopicMatcherFactory topicMatcherFactory = WSMTMFUtil.and(List.of(\n"
        + "      WSMTMFUtil.value(\"m1\", EncodingUtil.substituteArguments(\"${request.p1}\", \"request.p1\", request.getp1())),\n"
        + "      WSMTMFUtil.value(\"M1\", EncodingUtil.substituteArguments(\"${request.P1}\", \"request.P1\", request.getP1())),\n"
        + "      WSMTMFUtil.or(List.of(\n"
        + "        WSMTMFUtil.value(\"m1_\", EncodingUtil.substituteArguments(\"${constants.C1_.foo}\", \"constants.C1_.foo\", ConflictConstants.C1___.FOO)),\n"
        + "        WSMTMFUtil.regexp(\"M1_\", EncodingUtil.substituteArguments(\".*${config.p1}.*\", \"config.p1\", ConflictProperties.getp1(getProperties())))))));\n"
        + "    WebsocketSubscribeRequest subscribeRequest = WebsocketSubscribeRequest.create(request, topic, topicMatcherFactory);\n"
        + "    return myWsEndpointWsEndpoint.subscribe(subscribeRequest, listener);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public boolean unsubscribeMyWsEndpoint(String subscriptionId) {\n"
        + "    return myWsEndpointWsEndpoint.unsubscribe(subscriptionId);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public String subscribea(Integer request, WebsocketListener<String> listener) {\n"
        + "    request = Optional.ofNullable(request).orElse(A_WS_REQUEST_DEFAULT_VALUE)\n"
        + "    String topic = \"a\";\n"
        + "    WebsocketMessageTopicMatcherFactory topicMatcherFactory = WebsocketMessageTopicMatcherFactory.ANY_MATCHER_FACTORY;\n"
        + "    WebsocketSubscribeRequest subscribeRequest = WebsocketSubscribeRequest.create(request, topic, topicMatcherFactory);\n"
        + "    return aWsEndpoint.subscribe(subscribeRequest, listener);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public boolean unsubscribea(String subscriptionId) {\n"
        + "    return aWsEndpoint.unsubscribe(subscriptionId);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public String subscribeA(String request, WebsocketListener<String> listener) {\n"
        + "    request = Optional.ofNullable(request).orElse(A_WS_REQUEST_DEFAULT_VALUE_)\n"
        + "    String topic = \"A\";\n"
        + "    WebsocketMessageTopicMatcherFactory topicMatcherFactory = WebsocketMessageTopicMatcherFactory.ANY_MATCHER_FACTORY;\n"
        + "    WebsocketSubscribeRequest subscribeRequest = WebsocketSubscribeRequest.create(request, topic, topicMatcherFactory);\n"
        + "    return AWsEndpoint.subscribe(subscribeRequest, listener);\n"
        + "  }\n"
        + "  \n"
        + "  @Override\n"
        + "  public boolean unsubscribeA(String subscriptionId) {\n"
        + "    return AWsEndpoint.unsubscribe(subscriptionId);\n"
        + "  }\n"
        + "  \n"
        + "}\n"
        + "", apiInterfaceGenerator.generate());
  }
  
  @Test(expected = IllegalStateException.class)
  public void testGenerateApi_RestEndpointFoundButNoNetworkOnExchange() throws Exception {
    ExchangeDescriptor exchangeDescriptor = ExchangeDescriptorParser.fromJson(Paths.get(".", "src", "test", "resources", "testExchangeDescriptor.json"));
    exchangeDescriptor.setNetwork(null);
    ExchangeApiDescriptor exchangeApiDescriptor = exchangeDescriptor.getApis().get(0);
    ExchangeApiInterfaceImplementationGenerator apiInterfaceGenerator = new ExchangeApiInterfaceImplementationGenerator(exchangeDescriptor, exchangeApiDescriptor, PlaceHolderResolver.NO_OP);
    apiInterfaceGenerator.generate();
  }
  
  @Test(expected = IllegalStateException.class)
  public void testGenerateApi_RestEndpointFoundButNoNetworkHasNoHttpClient() throws Exception {
    ExchangeDescriptor exchangeDescriptor = ExchangeDescriptorParser.fromJson(Paths.get(".", "src", "test", "resources", "testExchangeDescriptor.json"));
    exchangeDescriptor.setNetwork(NetworkDescriptor.builder().build());
    ExchangeApiDescriptor exchangeApiDescriptor = exchangeDescriptor.getApis().get(0);
    exchangeApiDescriptor.setDefaultHttpClient(null);
    exchangeApiDescriptor.getRestEndpoints().get(0).setHttpClient(null);
    ExchangeApiInterfaceImplementationGenerator apiInterfaceGenerator = new ExchangeApiInterfaceImplementationGenerator(exchangeDescriptor, exchangeApiDescriptor, PlaceHolderResolver.NO_OP);
    apiInterfaceGenerator.generate();
  }
  
  @Test(expected = IllegalStateException.class)
  public void testGenerateApi_RestEndpointFoundWithInvalidHttpClient() throws Exception {
    ExchangeDescriptor exchangeDescriptor = ExchangeDescriptorParser.fromJson(Paths.get(".", "src", "test", "resources", "testExchangeDescriptor.json"));
    ExchangeApiDescriptor exchangeApiDescriptor = exchangeDescriptor.getApis().get(0);
    exchangeApiDescriptor.getRestEndpoints().get(0).setHttpClient("invalidHttpClientId");
    ExchangeApiInterfaceImplementationGenerator apiInterfaceGenerator = new ExchangeApiInterfaceImplementationGenerator(exchangeDescriptor, exchangeApiDescriptor, PlaceHolderResolver.NO_OP);
    apiInterfaceGenerator.generate();
  }
  
  @Test(expected = IllegalStateException.class)
  public void testGenerateApi_WebsocketEndpointFoundButNoNetworkOnExchange() throws Exception {
    ExchangeDescriptor exchangeDescriptor = ExchangeDescriptorParser.fromJson(Paths.get(".", "src", "test", "resources", "testExchangeDescriptorNoRestEndpoint.json"));
    exchangeDescriptor.setNetwork(null);
    ExchangeApiDescriptor exchangeApiDescriptor = exchangeDescriptor.getApis().get(0);
    ExchangeApiInterfaceImplementationGenerator apiInterfaceGenerator = new ExchangeApiInterfaceImplementationGenerator(exchangeDescriptor, exchangeApiDescriptor, PlaceHolderResolver.NO_OP);
    apiInterfaceGenerator.generate();
  }
  
  @Test(expected = IllegalStateException.class)
  public void testGenerateApi_WebsocketEndpointFoundButNetworkHasNoWebsocketClient() throws Exception {
    ExchangeDescriptor exchangeDescriptor = ExchangeDescriptorParser.fromJson(Paths.get(".", "src", "test", "resources", "testExchangeDescriptorNoRestEndpoint.json"));
    exchangeDescriptor.setNetwork(NetworkDescriptor.builder().build());
    ExchangeApiDescriptor exchangeApiDescriptor = exchangeDescriptor.getApis().get(0);
    exchangeApiDescriptor.setDefaultWebsocketClient(null);
    exchangeApiDescriptor.getWebsocketEndpoints().get(0).setWebsocketClient(null);
    ExchangeApiInterfaceImplementationGenerator apiInterfaceGenerator = new ExchangeApiInterfaceImplementationGenerator(exchangeDescriptor, exchangeApiDescriptor, PlaceHolderResolver.NO_OP);
    apiInterfaceGenerator.generate();
  }
  
  @Test(expected = IllegalStateException.class)
  public void testGenerateApi_WebsocketEndpointFoundWithInvalidWebsocketClient() throws Exception {
    ExchangeDescriptor exchangeDescriptor = ExchangeDescriptorParser
        .fromJson(Paths.get(".", "src", "test", "resources", "testExchangeDescriptorNoRestEndpoint.json"));
    ExchangeApiDescriptor exchangeApiDescriptor = exchangeDescriptor.getApis().get(0);
    exchangeApiDescriptor.getWebsocketEndpoints().get(0).setWebsocketClient("invalidWebsocketClientId");
    ExchangeApiInterfaceImplementationGenerator apiInterfaceGenerator = new ExchangeApiInterfaceImplementationGenerator(
        exchangeDescriptor, exchangeApiDescriptor, PlaceHolderResolver.NO_OP);
    apiInterfaceGenerator.generate();
  }
}
