id: conflict
version: 1.0.0
description: > 
  A dummy exchange where one REST and one websocket endpoint are defined, using parameters with names so
  that their generated code associated variables or classes would conflict.
  Will be used for tests that ensure that such conflicts are properly resolved.
docUrl: https://www.example.com/docs/conflict
basePackage: org.jxapi.exchanges.conflict.gen
httpUrl: https://api.example.com/conflict
network:
  httpClients:
   - name: httpDefault
     httpRequestInterceptorFactory: org.jxapi.exchanges.demo.net.DemoExchangeHttpRequestInterceptorFactory
  websocketClients:
   - name: wsDefault
     websocketUrl: ${config.server.baseWebsocketUrl}
     websocketHookFactory: org.jxapi.exchanges.demo.net.DemoExchangeWebsocketHookFactory
constants:
  - name: c1
    type: INT
    description: "'c1' constant"
    value: 12340
  - name: C1
    type: STRING
    description: "'C1' constant (note the uppercase 'C')"
    value: 10000
  - name: c1_
    type: LONG
    description: "'c1_' constant (note the underscore)"
    value: 1234567890
  - name: C1_
    description: "'C1_' constant group (note the uppercase 'C' and underscore)"
    constants:
      - name: foo
        description: Foo constant of C1 group. Value is default websocket URL
        value: wss://ws.api.example.com/conflict
      - name: bar
        description: Bar constant of C1 group
        value: barVal
properties:
  - name: p1
    type: INT
    description: p1 property. 
    defaultValue: ${constants.c1}
  - name: P1
    type: STRING
    description: P1 property (note the uppercase 'P'). Base URL for websocket endpoints of the Conflict Exchange API
    defaultValue: ${constants.C1_.foo}   
apis:
 - name: v1
   defaultHttpClient: httpDefault
   defaultWebsocketClient: wsDefault
   description: "Version 1 of the Employee API"
   httpUrl: v1
   restEndpoints:
    - name: myRestEndpoint
      description: Get employee details by ID
      httpMethod: GET
      url: /myApi
      request:
       objectName: ConflictRequest
       properties:
        - name: p1
          type: INT
          description: p1 parameter
          sampleValue: ${constants.c1}
        - name: P1
          type: STRING
          description: P1 parameter (note the uppercase 'P'). Its  value should be one of the values of the ${constants.C1_} constant group
          sampleValue: ${constants.C1_.bar}  
        - name: p1_
          type: LONG
          description: p1_ parameter (note the underscore)
          sampleValue: ${constants.c1_}
        - name: P1_
          type: OBJECT
          description: P1_ parameter (note the uppercase 'P' and underscore)
          properties:
            - name: subParam
              type: BIGDECIMAL
              description: subParam parameter
              sampleValue: 12.35
    - name: a
      description: Rest endpoint 'a' with default value for request
      httpMethod: GET
      url: /myApi
      request:
       type: "LONG_MAP"      
       defaultValue: 
          foo: "${constants.c1_}"            
          bar: 20000
      response:
       description: Response for endpoint 'a'
    - name: A
      description: Rest endpoint 'A' with default value for request
      httpMethod: GET
      url: /myApi
      request:
       type: "STRING_LIST"      
       defaultValue: 
          - ${constants.C1_.foo}
          - ${constants.C1_.bar}
      response:
       description: Response for endpoint 'A'           
   websocketEndpoints:
    - name: myWsEndpoint
      description: Employee updates websocket
      docUrl: https://www.example.com/docs/employee/updates
      request:
       objectName: ConflictRequest
      topicMatcher:
        and:
         - fieldName: m1
           fieldValue: "${request.p1}"
         - fieldName: M1
           fieldValue: "${request.P1}"
         - or:
            - fieldName: m1_
              fieldValue: "${constants.C1_.foo}"
            - fieldName: "M1_"
              fieldRegexp: ".*${config.p1}.*"
      message:
       description: Update message
       properties:
        - name: m1
          type: INT
          description: m1 parameter
          sampleValue: 1
        - name: M1
          type: STRING
          description: M1 parameter (note the uppercase 'M')
          sampleValue: test
        - name: m1_
          type: BOOLEAN
          description: m1_ parameter (note the underscore)
          sampleValue: true
        - name: M1_
          type: BIGDECIMAL
          description: M1_ parameter (note the uppercase 'M' and underscore)
          sampleValue: 12.35
    - name: a
      description: Websocket endpoint 'a' default value for request
      request:
       type: INT
       defaultValue: "${constants.c1}"
      message:
       description: Update message
    - name: A
      description: Websocket endpoint 'A' default value for request
      request:
       defaultValue: "${constants.C1}"
      message:
       description: Update message       
 - name: a
 - name: A